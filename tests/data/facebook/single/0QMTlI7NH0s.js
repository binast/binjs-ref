if (self.CavalryLogger) { CavalryLogger.start_js(["qnR1n"]); }

__d('BucketedTypeaheadView',['fbt','DOM','TypeaheadView'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('TypeaheadView'));j=i&&i.prototype;k.prototype.render=function(l,m,n,o){'use strict';var p=m.length>0;for(var q=0;q<m.length;++q)if(m[q].type!=='hashtag')p=false;if(!p)m=this.buildBuckets(l,m);if(n&&o){var r=this.results.length-this.index;this.index=m.length-r;}return j.render.call(this,l,m,n);};k.prototype.highlight=function(l,m){'use strict';this.headerIndex=false;if(l==-1&&this.index!==0)l=this.index;while(l>=0&&l<this.items.length&&!this.isHighlightable(this.results[l])){l=l+1;this.headerIndex=true;}j.highlight.call(this,l,m);};k.prototype.buildBuckets=function(l,m){'use strict';if(!this.typeObjects||!m||!m.length)return m;var n=[],o={};for(var p=0;p<m.length;++p){var q=m[p],r=q.render_type||q.type;if(!o.hasOwnProperty(r)){o[r]=n.length;n.push([this.buildBucketHeader(r)]);}q.classNames=q.classNames||r;q.groupIndex=o[r];q.indexInGroup=n[q.groupIndex].length-1;q.globalIndex=p;n[q.groupIndex].push(q);}for(r in this.typeObjects)if(!o.hasOwnProperty(r)&&this.typeObjects[r].show_always){o[r]=n.length;n.push([this.buildBucketHeader(r)]);q=this.buildNoResultsEntry();q.classNames=q.type;q.groupIndex=o[r];q.indexInGroup=n[q.groupIndex].length-1;n[q.groupIndex].push(q);}var s=[];if(this.typeObjectsOrder){for(var t=0;t<this.typeObjectsOrder.length;++t){var u=this.typeObjectsOrder[t];if(o.hasOwnProperty(u))s=s.concat(n[o[u]]);}}else for(var v=0;v<n.length;++v)s=s.concat(n[v]);return s;};k.prototype.buildNoResultsEntry=function(){'use strict';return {uid:'disabled_result',type:'disabled_result',text:h._("No Results")};};k.prototype.buildBucketHeader=function(l){'use strict';var m=this.typeObjects[l];if(m===undefined)throw new Error(l+" is undefined in "+JSON.stringify(this.typeObjects));if(m.markup){m.text=m.markup;delete m.markup;}return this.typeObjects[l];};k.prototype.buildResults=function(l){'use strict';var m=j.buildResults.call(this,l);if(this.typeObjects){return c('DOM').create('div',{className:'bucketed'},[m]);}else return m;};k.prototype.isHighlightable=function(l){'use strict';return l.type!='header'&&l.type!='disabled_result';};k.prototype.select=function(l){'use strict';var m=this.results[this.index];if(m&&this.isHighlightable(m))j.select.call(this,l);};k.prototype.updateResults=function(l){'use strict';this.results=l;};k.prototype.normalizeIndex=function(l){'use strict';var m=this.results.length;if(m===0){return -1;}else if(l<-1){return l%m+m+1;}else if(l>=m){return l%m-1;}else return l;};k.prototype.getDefaultIndex=function(l){'use strict';var m=this.autoSelect&&!this.disableAutoSelect;if(this.index<0&&!m)return -1;if(l.length===0)return -1;var n=0;while(!this.isHighlightable(l)&&n<l.length)n++;return n;};k.prototype.prev=function(){'use strict';var l=this.results[this.normalizeIndex(this.index-1)];while(l&&!this.isHighlightable(l)){this.index=this.normalizeIndex(this.index-1);l=this.results[this.normalizeIndex(this.index-1)];}return j.prev.call(this);};k.prototype.next=function(){'use strict';var l=this.results[this.normalizeIndex(this.index+1)];while(l&&!this.isHighlightable(l)){this.index=this.normalizeIndex(this.index+1);l=this.results[this.normalizeIndex(this.index+1)];}return j.next.call(this);};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('ContextualTypeaheadView',['BucketedTypeaheadView','CSS','ContextualLayer','ContextualLayerAutoFlip','ContextualLayerHideOnScroll','DOM','DOMDimensions','Style'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('BucketedTypeaheadView'));i=h&&h.prototype;j.prototype.init=function(){'use strict';this.initializeLayer();i.init.call(this);};j.prototype.initializeLayer=function(){'use strict';this.context=this.getContext();this.wrapper=c('DOM').create('div');c('DOM').appendContent(this.wrapper,this.element);c('CSS').addClass(this.element,'uiContextualTypeaheadView');this.layer=new (c('ContextualLayer'))({context:this.context,position:'below',alignment:this.alignment,causalElement:this.causalElement,permanent:true,shouldSetARIAProperties:false},this.wrapper);this.layer.enableBehavior(c('ContextualLayerHideOnScroll'));if(c('Style').isFixed(this.context)||this.autoflip)this.layer.enableBehavior(c('ContextualLayerAutoFlip'));this.subscribe('render',this.renderLayer.bind(this));};j.prototype.show=function(){'use strict';if(this.minWidth){c('Style').set(this.wrapper,'min-width',this.minWidth+'px');}else if(this.width){c('Style').set(this.wrapper,'width',this.width+'px');}else c('Style').set(this.wrapper,'width',c('DOMDimensions').getElementDimensions(this.context).width+'px');var k=i.show.call(this);this.layer.show();this.inform('show');return k;};j.prototype.hide=function(){'use strict';this.layer.hide();this.inform('hide');return i.hide.call(this);};j.prototype.renderLayer=function(){'use strict';if(!this.isVisible())return;if(this.layer.isShown()){this.layer.updatePosition();}else this.layer.show();};j.prototype.clearText=function(){'use strict';this.layer.getCausalElement().value='';};j.prototype.getContext=function(){'use strict';return this.element.parentNode;};function j(){'use strict';h.apply(this,arguments);}f.exports=j;}),null);
__d('TypeaheadCore',['Arbiter','ArbiterMixin','CSS','DOM','Event','Focus','Input','InputSelection','Keys','StickyPlaceholderInput','UserAgent','bind','emptyFunction','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.events=['blur','focus','click','unselect','loading','change'];this.keepFocused=true;this.preventFocusChangeOnTab=false;this.queryTimeout=250;this.resetOnKeyup=true;this.resetOnSelect=false;this.setValueOnSelect=false;Object.assign(this,k);}j.prototype.init=function(k,l,m){'use strict';this.init=c('emptyFunction');this.data=k;this.view=l;this.root=m;this.initInput();this.inputWrap=c('DOM').find(m,'div.wrap');this.hiddenInput=c('DOM').find(m,'input.hiddenInput');this.value='';this.nextQuery=null;this.selectedText=null;if(this.setValueOnSelect&&c('CSS').hasClass(this.inputWrap,'selected'))this.selectedText=this.getValue();this.initView();this.initData();this.initEvents();this.initToggle();this._exclusions=[];};j.prototype.initInput=function(){'use strict';this.element=c('DOM').find(this.root,'.textInput');var k=c('DOM').scry(this.element,'input')[0];if(k)this.element=k;};j.prototype.initView=function(){'use strict';this.view.subscribe('highlight',c('Focus').set.bind(null,this.element));this.view.subscribe('select',function(k,l){this.select(l.selected);}.bind(this));this.view.subscribe('afterSelect',function(){this.afterSelect();}.bind(this));};j.prototype.initData=function(){'use strict';this.data.subscribe('notify',function(k,l){if(this.root.id==l.rootid&&!this.element.disabled&&l.value==this.getValue())this.view.render(l.value,l.results,l.isAsync);}.bind(this));this.data.subscribe('respond',function(k,l){if(l.forceDisplay||l.value==this.getValue()&&!this.element.disabled&&(this.element.getAttribute('singlestate')!=='true'||l.nullState))this.view.render(l.value,l.results,l.isAsync);}.bind(this));this.data.subscribe('activity',function(k,l){this.fetching=l.activity;if(!this.fetching)this.nextQuery&&this.performQuery();if(this.loading!=this.fetching){this.loading=this.fetching;this.inform('loading',{loading:this.loading});}}.bind(this));};j.prototype.initEvents=function(){'use strict';c('Event').listen(this.view.getElement(),{mouseup:this.viewMouseup.bind(this),mousedown:this.viewMousedown.bind(this)});var k={blur:c('bind')(this,'blur'),focus:c('bind')(this,'focus'),click:c('bind')(this,'click'),keyup:c('bind')(this,'keyup'),keydown:c('bind')(this,'keydown'),keypress:c('bind')(this,'keypress')};if(c('UserAgent').isBrowser('Firefox'))c('Event').listen(this.element,{input:k.keyup});c('Event').listen(this.element,k);};j.prototype.initToggle=function(){'use strict';this.subscribe('blur',this.view.hide.bind(this.view));this.subscribe('focus',this.view.show.bind(this.view));};j.prototype.viewMousedown=function(){'use strict';this.selecting=true;};j.prototype.viewMouseup=function(){'use strict';this.selecting=false;};j.prototype.blur=function(){'use strict';if(this.selecting){this.selecting=false;return;}this.inform('blur');};j.prototype.click=function(){'use strict';var k=c('InputSelection').get(this.element);if(k.start==k.end)this.element.select();this.inform('click');};j.prototype.focus=function(){'use strict';this.checkValue();this.inform('focus');};j.prototype.keyup=function(){'use strict';if(this.resetOnKeyup&&!this.getValue())this.view.reset();this.checkValue();if(this.getValue().length===0)this.inform('change',null);};j.prototype.keydown=function(event){'use strict';if(!this.view.isVisible()||this.view.isEmpty()){setTimeout(this.checkValue.bind(this),0);return;}switch(c('Event').getKeyCode(event)){case c('Keys').TAB:this.handleTab(event);return;case c('Keys').UP:this.view.prev();break;case c('Keys').DOWN:this.view.next();break;case c('Keys').ESC:this.view.reset();break;default:setTimeout(this.checkValue.bind(this),0);return;}event.kill();};j.prototype.keypress=function(event){'use strict';if(this.view.getSelection()&&c('Event').getKeyCode(event)==c('Keys').RETURN){this.view.select();event.kill();}};j.prototype.handleTab=function(event){'use strict';if(this.preventFocusChangeOnTab)if(this.view.getSelection()){event.kill();}else event.prevent();this.view.select();};j.prototype.select=function(k){'use strict';if(k&&this.setValueOnSelect){var l=k.orig_text||k.text;this.setValue(l);this.setHiddenValue(k.uid);this.selectedText=l;c('CSS').addClass(this.inputWrap,'selected');}};j.prototype.afterSelect=function(){'use strict';this.keepFocused?c('Focus').set(this.element):this.element.blur();this.resetOnSelect?this.reset():this.view.reset();};j.prototype.unselect=function(){'use strict';if(this.setValueOnSelect){this.selectedText=null;c('CSS').removeClass(this.inputWrap,'selected');}this.setHiddenValue();this.inform('unselect',this);};j.prototype.setEnabled=function(k){'use strict';var l=k===false;this.element.disabled=l;c('CSS').conditionClass(this.root,'uiTypeaheadDisabled',l);};j.prototype.reset=function(){'use strict';this.unselect();this.setValue();!this.keepFocused&&c('Input').reset(this.element);this.view.reset();this.inform('reset');};j.prototype.getElement=function(){'use strict';return this.element;};j.prototype.setExclusions=function(k){'use strict';this._exclusions=k.map(String);};j.prototype.getExclusions=function(){'use strict';return this._exclusions;};j.prototype.setValue=function(k){'use strict';this.value=this.nextQuery=k||'';c('Input').setValue(this.element,this.value);c('StickyPlaceholderInput').update(this.element);this.inform('change',k);};j.prototype.setHiddenValue=function(k){'use strict';if(typeof k==='number')k=String(k);this.hiddenInput.value=k||'';c('Arbiter').inform('Form/change',{node:this.hiddenInput});};j.prototype.getValue=function(){'use strict';return c('Input').getValue(this.element);};j.prototype.getHiddenValue=function(){'use strict';return this.hiddenInput.value||'';};j.prototype.checkValue=function(){'use strict';var k=this.getValue();if(k==this.value)return;if(this.selectedText&&this.selectedText!=k)this.unselect();var l=Date.now(),m=l-this.time;this.time=l;this.value=this.nextQuery=k;this.inform('change',this.value);this.performQuery(m);};j.prototype.performQuery=function(k){'use strict';if(this.selectedText)return;k=k||0;if(this.fetching&&k<this.queryTimeout){this.data.query(this.nextQuery,true,this._exclusions,k);}else{this.data.query(this.nextQuery,false,this._exclusions,k);this.nextQuery=null;}};j.prototype.updateHeight=function(){'use strict';};f.exports=j;}),null);
__d('SearchPeopleFriendsOf',['fbt','TokenizeUtil','URI'],(function a(b,c,d,e,f,g,h){function i(j,k){'use strict';this.friendsOfUri=j;this.placementStrategy=k.placement_strategy;this.placementParams=k.placement_params;this.triggerStrategy=k.trigger_strategy;this.triggerParams=k.trigger_params;}i.prototype.injectInto=function(j,k){'use strict';if(!j||j.length===0||!this.$SearchPeopleFriendsOf1(j,k))return;if(j[0].type!=="user")return;var l=this.createFindAllFriendsOf(j[0].text,j[0].uid);this.$SearchPeopleFriendsOf2(l,j);};i.prototype.$SearchPeopleFriendsOf2=function(j,k){'use strict';var l=this.$SearchPeopleFriendsOf3(k);if(l==='last'){var m=k.filter(function(n){return n.type==='user';}).length;l=m;}k.splice(l,0,j);};i.prototype.$SearchPeopleFriendsOf1=function(j,k){'use strict';var l=this.$SearchPeopleFriendsOf4(this.triggerStrategy);return l(j,this.triggerParams,k);};i.prototype.$SearchPeopleFriendsOf3=function(j){'use strict';var k=this.$SearchPeopleFriendsOf4(this.placementStrategy);return k(j,this.placementParams);};i.prototype.$SearchPeopleFriendsOf4=function(j){'use strict';return this["$SearchPeopleFriendsOf_"+j];};i.prototype.$SearchPeopleFriendsOf5=function(j,k,l){'use strict';return false;};i.prototype.$SearchPeopleFriendsOf6=function(j,k,l){'use strict';return true;};i.prototype.$SearchPeopleFriendsOf7=function(j,k,l){'use strict';var m=parseInt(k,10),n=0;for(var o=0;o<j.length;o++){var p=j[o];if(p.type==='user'&&p.index_rank==-1)n++;if(n>m)return false;}return true;};i.prototype.$SearchPeopleFriendsOf8=function(j,k,l){'use strict';var m=parseInt(k,10),n=c('TokenizeUtil').tokenize(l);n=n.map(function(v){return v.toLowerCase();});var o=0;for(var p=0;p<j.length;p++){var q=j[p];if(q.type!=='user'||q.index_rank!=-1)continue;var r=c('TokenizeUtil').tokenize(q.text);r=r.map(function(v){return v.toLowerCase();});if(r.length<n.length)continue;var s=true;for(var t=0;t<n.length-1;t++)if(n[t]!==r[t]){s=false;break;}var u=n.length-1;if(s&&r[u].startsWith(n[u])){o++;if(o>=m)return false;}}return true;};i.prototype.$SearchPeopleFriendsOf9=function(j,k){'use strict';return "last";};i.prototype.$SearchPeopleFriendsOf10=function(j,k){'use strict';return 1;};i.prototype.createFindAllFriendsOf=function(j,k){'use strict';var l=h._("{name}'s Friends",[h.param('name',j)]),m=new (c('URI'))(this.friendsOfUri).addQueryData({q:"",init:'psm',fofid:k}).toString();return {uid:'people_search',type:'user',text:l,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',logType:'grammar',path:m};};f.exports=i;}),null);
__d('SearchPeopleSeeMore',['fbt','invariant','TokenizeUtil','URI'],(function a(b,c,d,e,f,g,h,i){function j(k,l){var m=l.placement,n=l.strategy,o=l.min_users,p=l.query_to_show;'use strict';this.seeMoreUri=k;this.placement=m;this.strategy=n;this.min_users=o;this.query_to_show=p;}j.prototype.injectInto=function(k,l){'use strict';if(!k||k.length===0)return;var m=this.$SearchPeopleSeeMore1(k,l);if(!m)return;var n=this.createFindAllPeopleResult(m);this.$SearchPeopleSeeMore2(n,k);};j.prototype.$SearchPeopleSeeMore1=function(k,l){'use strict';if(this.strategy==='disabled')return null;if(k[0].type!=='user')return null;var m=k.filter(function(q){return q.type==='user';});if(m.length<this.min_users){return null;}else if(m.length>this.min_users)m=m.slice(0,this.min_users);var n,o=m[0];switch(this.strategy){case 'all_identical':var p=m.every(function(q){return this.$SearchPeopleSeeMore3(o.text,q.text);}.bind(this));n=p?o.text:null;break;case 'top_results_prefix':n=m.reduce(function(q,r){return this.$SearchPeopleSeeMore4(q,r.text);}.bind(this),o.text);break;default:i(0);}if(!n)return null;return this.query_to_show==='common'?n:l;};j.prototype.$SearchPeopleSeeMore2=function(k,l){'use strict';if(this.placement==='last'){var m=l.filter(function(o){return o.type==='user';}).length;l.splice(m,0,k);}else{var n=parseInt(this.placement,10);l.splice(n,0,k);}};j.prototype.createFindAllPeopleResult=function(k){'use strict';var l=h._("Find all people named \"{query}\"",[h.param('query',k.toLowerCase())]),m=new (c('URI'))(this.seeMoreUri).addQueryData({q:k,init:'psm'}).toString();return {uid:'people_search',type:'user',text:l,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',path:m};};j.prototype.$SearchPeopleSeeMore3=function(k,l){'use strict';if(k===l)return true;var m=c('TokenizeUtil').tokenize(k),n=c('TokenizeUtil').tokenize(l);if(m.length!==n.length)return false;return m.every(function(o,p){return o===n[p];});};j.prototype.$SearchPeopleSeeMore4=function(k,l){'use strict';if(!k||!l)return;if(k===l)return k;var m=c('TokenizeUtil').tokenize(k),n=c('TokenizeUtil').tokenize(l),o=[];for(var p=0;p<m.length&&p<n.length;p++)if(m[p]===n[p]){o.push(m[p]);}else break;if(o.length===0)return null;return o.join(' ');};f.exports=j;}),null);
__d('SearchTypeaheadCore',['Arbiter','DOM','Event','Input','Keys','Parent','ScriptPath','TypeaheadCore'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('TypeaheadCore'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);}j.prototype.init=function(k,l,m){'use strict';i.init.call(this,k,l,m);var n=c('Parent').byTag(m,'form'),o=this.reset.bind(this);c('Arbiter').subscribe('pre_page_transition',function(event,q){var r=/^\/search/,s=r.test(q.from.path),t=r.test(q.to.path);if(s&&!t)setTimeout(o,0);});if(n){var p=c('DOM').find(n,'input.search_sid_input');c('Event').listen(n,'submit',function(){if(this.data&&this.data.queryData)p.value=this.data.queryData.sid;setTimeout(o,0);}.bind(this),c('Event').Priority.URGENT);}};j.prototype.select=function(){'use strict';this.reset();this.element.focus();setTimeout(function(){this.element.blur();}.bind(this),0);c('ScriptPath').setClickPointInfo({click:'Search'});};j.prototype.handleTab=function(event){'use strict';var k=this.view.getQuerySuggestion(this.value);if(k){c('Input').setValue(this.element,k);this.checkValue();event.kill();}else i.handleTab.call(this,event);};j.prototype.getSearchType=function(){'use strict';return 'regular';};j.prototype.focus=function(){'use strict';i.focus.call(this);if(this.getValue().length===0||this.element.getAttribute('singlestate')==='true')this.data.fetchNullState(this.getValue());};j.prototype.keyup=function(event){'use strict';if(this.getValue().length===0&&c('Event').getKeyCode(event)===c('Keys').ESC)return;if(this.getValue().length===0)this.data.fetchNullState(this.getValue());this.element.setAttribute('singlestate',false);};f.exports=j;}),null);
__d('SearchTypeaheadView',['csx','cx','fbt','Arbiter','ContextualLayerUpdateOnScroll','ContextualTypeaheadView','DOM','FbtResult','SearchPeopleFriendsOf','SearchPeopleFriendsOfOptions','SearchPeopleSeeMore','SearchPeopleSeeMoreOptions','URI','goURI','isEmail'],(function a(b,c,d,e,f,g,h,i,j){var k,l;k=babelHelpers.inherits(m,c('ContextualTypeaheadView'));l=k&&k.prototype;function m(o,p){'use strict';l.constructor.call(this,o,p);this._peopleSeeMore=new (c('SearchPeopleSeeMore'))(this.getSeeMoreEndpoint('',true),c('SearchPeopleSeeMoreOptions'));this._peopleFriendsOf=new (c('SearchPeopleFriendsOf'))(this.getSeeMoreEndpoint('',true),c('SearchPeopleFriendsOfOptions'));}m.prototype.initializeLayer=function(){'use strict';l.initializeLayer.call(this);this.layer.setOffsetY(-1);this.layer.enableBehavior(c('ContextualLayerUpdateOnScroll'));};m.prototype.ignoreClick=function(event){'use strict';event.prevent();};m.prototype.render=function(o,p,q){'use strict';if(!p)return;if(this._bucketize)p=n(p);if(this.showPeopleSeeMore&&o)this._peopleSeeMore.injectInto(p,o);if(this.showPeopleFriendsOf&&o)this._peopleFriendsOf.injectInto(p,o);var r={results:p,value:o};this.inform('finalResultsReordering',r);return l.render.call(this,o,r.results,q);};m.prototype.disableBucketization=function(){'use strict';this._bucketize=false;};m.prototype.buildBuckets=function(o,p){'use strict';var q=p.length,r=0,s;for(s=0;s<q;++s)if(p[s].type=='user')r++;this._redirectToUsersResultsPage=this.showFilterResults&&r===q;this.setWebSuggLoggingParams(o,p);if(!o&&this.showFindPeople)p.unshift(this.buildFindPeople());if(this._bucketize)p=l.buildBuckets.call(this,o,p);if(o&&this._shouldShowSeeMore){p.push(this.buildSeeMore(o,q));if(c('isEmail')(o)&&r<1)p.push(this.buildInvite(o));}return p;};m.prototype.buildFindPeople=function(){'use strict';var o=j._("Find people");return {classNames:'seeAllUser seeAllUserNullState',logType:'grammar',path:this.getSeeMoreEndpoint(null,true),photo:'/images/search_typeahead/people_see_more.png',text:o,type:'no_header'};};m.prototype.buildSeeMore=function(o,p){'use strict';var q=this.getSeeMoreText(o,p),r='seeMoreV2',s='calltoactionV2',t=c('DOM').create('span',{className:'simpleSearchSeeMoreRowRedesignIcon'}),u=c('DOM').create('li',{className:s},[t,c('DOM').create('a',{href:this.getSeeMoreEndpoint(o),rel:'ignore'},[c('DOM').create('span',{className:'text'},[c('DOM').create('span',{className:r},q)])])]);if(q instanceof c('FbtResult')){u.setAttribute('aria-label',q.flattenToArray());}else u.setAttribute('aria-label',q);return {uid:'search',node:u,search:true};};m.prototype.getSeeMoreText=function(o,p){'use strict';if(this.showKeywordResultsPage)return j._("Search for {query}",[j.param('query',o)]);if(p<=0)return j._("See results for {query}",[j.param('query',o)]);if(this._redirectToUsersResultsPage)return j._("Filter results for {query}",[j.param('query',o)]);var q=c('DOM').create('b',{},o);return j._("Find more results for {query}",[j.param('query',q)]);};m.prototype.getSeeMoreSubtext=function(o){'use strict';if(o===0)return j._("No results to display");if(o===1)return j._("Displaying top result");return j._({"*":"Displaying top {number} results"},[j.param('number',o,[0])]);};m.prototype.buildInvite=function(o){'use strict';var p=j._("Invite {query} to Facebook",[j.param('query',o)]),q=c('DOM').create('li',{className:'calltoaction'},[c('DOM').create('a',{href:this.getInviteEndpoint(o),rel:'ignore'},[c('DOM').create('span',{className:'text'},[c('DOM').create('span',{className:'invite'},[p])])])]);if(p instanceof c('FbtResult')){q.setAttribute('arial-label',p.flattenToArray());}else q.setAttribute('aria-label',p);return {uid:'invite',node:q,search:true};};m.prototype.searchPageQueryData=function(o){'use strict';return babelHelpers['extends']({q:o},this.queryData||{});};m.prototype.searchPageTypeData=function(o){'use strict';return this._redirectToUsersResultsPage||o?{type:"users"}:{};};m.prototype.select=function(o){'use strict';var p=this.index,q=this.results[p];if(!q||q.type=='header')return;var r=this.items[p],s=c('DOM').scry(r,'a')[0];l.select.call(this,o);if(s&&s.href)if(s.target=='_blank'){window.open(s.href);}else c('goURI')(s.href);};m.prototype.setSid=function(o){'use strict';this.queryData.tas=o;};m.prototype.getSeeMoreEndpoint=function(o,p){'use strict';return new (c('URI'))(this.seeMoreEndpoint).addQueryData(this.searchPageQueryData(o)).addQueryData(this.searchPageTypeData(p)).toString();};m.prototype.getInviteEndpoint=function(o){'use strict';return new (c('URI'))('/invite.php').addQueryData({email_list:o});};m.prototype.show=function(){'use strict';if(!this.isVisible()){c('Arbiter').inform('layer_shown',{type:'SearchTypeahead'});this.searchBtns=this.searchBtns||c('DOM').scry(this.typeahead,'button.reDesignedBtn');if(this.searchBtns[0])CSS.addClass(this.searchBtns[0],"btnSelected");l.show.call(this);}};m.prototype.hide=function(){'use strict';if(this.isVisible()){c('Arbiter').inform('layer_hidden',{type:'SearchTypeahead'});this.searchBtns=this.searchBtns||c('DOM').scry(this.typeahead,'button.reDesignedBtn');if(this.searchBtns[0]&&CSS.matchesSelector(this.searchBtns[0],".btnSelected"))CSS.removeClass(this.searchBtns[0],"btnSelected");l.hide.call(this);}};m.prototype.getQuerySuggestion=function(o){'use strict';var p=this.results[this.index],q=p&&p.type!='header'?p.text.toLowerCase():'';return q==o.toLowerCase()?'':q;};m.prototype.setWebSuggLoggingParams=function(o,p){'use strict';var q=0,r=0;for(var s=0;s<p.length;s++)if(p[s].type==='websuggestion'){if(r===0)r=s+1;var t='FR'+(s-q)+'AS'+q,u=s+1;p[s].path+='&wssk='+t+'&wssp='+u+'&wspq='+encodeURIComponent(o);p[s].path+='&wssrc='+p[s].websuggestion_source;q++;}var v='&wssc='+p.length+'-'+o.length+'&wsbp='+q+'-'+r;for(s=0;s<p.length;s++)if(p[s].type==='websuggestion')p[s].path+=v;};function n(o){var p,q,r,s,t=[],u={};q=o.length;for(p=0;p<q;p++){r=o[p];s=r.render_type||r.type;if(!u.hasOwnProperty(s)){u[s]=t.length;t.push([]);}t[u[s]].push(r);}var v=[];q=t.length;for(p=0;p<q;++p){r=t[p][0];s=r.render_type||r.type;v=v.concat(t[p]);}return v;}Object.assign(m.prototype,{_shouldShowSeeMore:true,_bucketize:true,queryData:{init:'quick'}});f.exports=m;}),null);
__d('TypeaheadSearchFilter',['Arbiter'],(function a(b,c,d,e,f,g){function h(i){'use strict';this._typeahead=i;}h.prototype.enable=function(){'use strict';var i=this._typeahead,j=i.getView().seeMoreEndpoint;this._subscriptions=[c('Arbiter').subscribe('search/typeahead/updateFilter',function(k,l){if(l.filter_type=='web')i.getView().queryData.form='FBKBFR';i.getView().queryData.type=l.filter_type;}),c('Arbiter').subscribe('search/typeahead/updateSeeMoreEndpoint',function(k,l){i.getView().seeMoreEndpoint=l;}),c('Arbiter').subscribe('page_transition',function(k,l){if(i.getView().queryData.form)delete i.getView().queryData.form;delete i.getView().queryData.type;i.getView().seeMoreEndpoint=j;},c('Arbiter').SUBSCRIBE_NEW)];};h.prototype.disable=function(){'use strict';this._subscriptions.forEach(function(i){i.unsubscribe();});this._subscriptions=null;};Object.assign(h.prototype,{_subscription:null});f.exports=h;}),null);
__d('legacy:SearchFilterTypeaheadBehavior',['TypeaheadSearchFilter'],(function a(b,c,d,e,f,g){if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.initFilters=function(h){h.enableBehavior(c('TypeaheadSearchFilter'));};}),3);
__d('TypeaheadSearchRecorderBasic',['SearchTypeaheadRecorder','emptyFunction'],(function a(b,c,d,e,f,g){function h(i){'use strict';this._typeahead=i;}h.prototype.enable=function(){'use strict';new (c('SearchTypeaheadRecorder'))(this._typeahead);};Object.assign(h.prototype,{disable:c('emptyFunction')});f.exports=h;}),null);
__d('legacy:SearchRecorderBasicTypeaheadBehavior',['TypeaheadSearchRecorderBasic'],(function a(b,c,d,e,f,g){if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.searchRecorderBasic=function(h){h.enableBehavior(c('TypeaheadSearchRecorderBasic'));};}),3);
__d('SessionStartSurvey',['AsyncRequest','SubscriptionsHandler','XSearchFacebarSurveyController','getOrCreateDOMID'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.core=i.getCore();this.data=i.getData();this.subscriptionsHandler=new (c('SubscriptionsHandler'))();}h.prototype.enable=function(){'use strict';this.subscriptionsHandler.addSubscriptions(this.data.subscribe('query',function(){this.openSurvey();}.bind(this)));};h.prototype.disable=function(){'use strict';this.subscriptionsHandler.release();this.request&&this.request.abort();};h.prototype.openSurvey=function(){'use strict';if(this.openedSurvey)return;this.openedSurvey=true;var i=c('XSearchFacebarSurveyController').getURIBuilder().setString('id',c('getOrCreateDOMID')(this.core.element)).setExists('on_session_start',true).setString('session_id',this.data.queryData.sid);this.request=new (c('AsyncRequest'))().setMethod('post').setURI(i.getURI());this.request.send();};f.exports=h;}),null);
__d('TypeaheadDetectQueryLocale',[],(function a(b,c,d,e,f,g){function h(i){'use strict';this._typeahead=i;this._data=i.getData();this._queryCache={'':this._data.queryCache,ja_JP:{},zh_TW:{}};}h.prototype.enable=function(){'use strict';this._previousLocale='';this._reset=this._typeahead.subscribe('reset',this._swapQueryCache.bind(this,''));this._beforeQuery=this._data.subscribe('beforeQuery',function(i,j){var k=j.value;if(k===''){this._swapQueryCache('');return;}var l=null,m=k.charCodeAt(k.length-1);if(12352<=m&&m<=12543){l='ja_JP';}else if(12544<=m&&m<=12735)l='zh_TW';this._swapQueryCache(l);}.bind(this));};h.prototype.disable=function(){'use strict';this._swapQueryCache('');this._data.unsubscribe(this._beforeQuery);this._typeahead.ubsubscribe(this._reset);};h.prototype._swapQueryCache=function(i){'use strict';if(i===null||i===this._previousLocale)return;this._data.queryCache=this._queryCache[i];this._data.setQueryData({query_locale:i});this._previousLocale=i;};f.exports=h;}),null);
__d('TypeaheadExcludeBootstrapFromQueryCache',[],(function a(b,c,d,e,f,g){function h(i){'use strict';this._data=i.getData();}h.prototype.enable=function(){'use strict';this._buildingQueryCache=false;this._buildQueryCache=this._data.subscribe('buildQueryCache',function(){this._buildingQueryCache=true;}.bind(this));this._mergeUids=this._data.subscribe('mergeUids',function(i,j){if(this._buildingQueryCache)j.local_uids.splice(0,j.local_uids.length);}.bind(this));this._fetchComplete=this._data.subscribe('fetchComplete',function(){this._buildingQueryCache=false;}.bind(this));};h.prototype.disable=function(){'use strict';this._data.unsubscribe(this._buildQueryCache);this._data.unsubscribe(this._mergeUids);this._data.unsubscribe(this._fetchComplete);};f.exports=h;}),null);
__d('TypeaheadPostSearchRedirect',[],(function a(b,c,d,e,f,g){function h(i){'use strict';this.view=i.getView();}h.prototype.enable=function(){'use strict';this.view.queryData.ref='ss_see_more_link';};h.prototype.disable=function(){'use strict';delete this.view.queryData.ref;};f.exports=h;}),null);
__d('TypeaheadRecentSearchUpdater',['Arbiter'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.view=i.getView();}h.prototype.enable=function(){'use strict';this.updaterSubscription=this.view.subscribe('select',function(){c('Arbiter').inform('search/refreshRecentSearchesNullstate',{},c('Arbiter').BEHAVIOR_STATE);});};h.prototype.disable=function(){'use strict';this.view.unsubscribe(this.updaterSubscription);};f.exports=h;}),null);
__d('TypeaheadShowLoadingIndicator',['CSS'],(function a(b,c,d,e,f,g){function h(i){'use strict';this._typeahead=i;}h.prototype.enable=function(){'use strict';this._subscription=this._typeahead.subscribe('loading',function(i,j){c('CSS').conditionClass(this._typeahead.getElement(),'typeaheadLoading',j.loading);c('CSS').conditionClass(this._typeahead.getView().getElement(),'typeaheadViewLoading',j.loading);}.bind(this));};h.prototype.disable=function(){'use strict';this._typeahead.unsubscribe(this._subscription);this._subscription=null;};Object.assign(h.prototype,{_subscription:null});f.exports=h;}),null);
__d('legacy:ShowLoadingIndicatorTypeaheadBehavior',['TypeaheadShowLoadingIndicator'],(function a(b,c,d,e,f,g){if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.showLoadingIndicator=function(h){h.enableBehavior(c('TypeaheadShowLoadingIndicator'));};}),3);
__d('TypeaheadPreventSubmitOnEnter',['Event','Keys'],(function a(b,c,d,e,f,g){function h(i){'use strict';this._typeahead=i;}h.prototype.enable=function(){'use strict';var i=this._typeahead.getCore().getElement();this._listener=c('Event').listen(i,'keypress',function(j){if(c('Event').getKeyCode(j)==c('Keys').RETURN)j.kill();});};h.prototype.disable=function(){'use strict';this._listener.remove();this._listener=null;};Object.assign(h.prototype,{_listener:null});f.exports=h;}),null);
__d('TypeaheadShowResultsOnFocus',['Event','Keys'],(function a(b,c,d,e,f,g){function h(i){'use strict';this._typeahead=i;}h.prototype.enable=function(){'use strict';this._typeahead.getCore().resetOnKeyup=false;this._subscription=this._typeahead.subscribe('bootstrap',function(i,j){this.firstFetch(j,this._typeahead.getCore(),this._typeahead.getData());}.bind(this));this._keyUpListener=c('Event').listen(this._typeahead.getCore().getElement(),'keyup',function(event){if(c('Event').getKeyCode(event)==c('Keys').BACKSPACE||c('Event').getKeyCode(event)==c('Keys').DELETE)this.respond(this._typeahead.getCore(),this._typeahead.getData());}.bind(this));this._focusListener=c('Event').listen(this._typeahead.getCore().getElement(),'focus',function(event){this.respond(this._typeahead.getCore(),this._typeahead.getData());}.bind(this));};h.prototype.disable=function(){'use strict';this._typeahead.unsubscribe(this._subscription);this._subscription=null;this._keyUpListener.remove();this._keyUpListener=null;this._focusListener.remove();this._focusListener=null;};h.prototype.firstFetch=function(i,j,k){'use strict';!i.bootstrapping&&this.respond(j,k);};h.prototype.respond=function(i,j){'use strict';if(!i.getValue())this.refreshAndShowNeededResults(i,j);};h.prototype.refreshAndShowNeededResults=function(i,j){'use strict';var k=this.getUidsFromData(j);i.setValue('');var l=j.buildUids(' ',k);j.respond('',l);};h.prototype.getUidsFromData=function(i){'use strict';var j=i.getAllEntries(),k=[];for(var l in j)k.push({uid:j[l].uid,index:j[l].index});k.sort(function(m,n){return m.index-n.index;});return k.map(function(m){return m.uid;});};Object.assign(h.prototype,{_subscription:null,_keyUpListener:null,_focusListener:null});f.exports=h;}),null);
__d('TypeaheadSubmitOnSelect',['FormSubmit'],(function a(b,c,d,e,f,g){function h(i){'use strict';this._typeahead=i;}h.prototype.enable=function(){'use strict';this._subscription=this._typeahead.subscribe('select',function(){var i=this._typeahead.getCore().getElement().form;if(i)i.getAttribute('rel')=='async'?c('FormSubmit').send(i):i.submit();}.bind(this));};h.prototype.disable=function(){'use strict';this._typeahead.unsubscribe(this._subscription);this._subscription=null;};Object.assign(h.prototype,{_subscription:null});f.exports=h;}),null);
__d('SearchTypeaheadRenderer',['fbt','BadgeHelper','DOM','Locale','TokenizeUtil','TypeaheadFacepile','URI','UnicodeBidi','WWWBase'],(function a(b,c,d,e,f,g,h){var i=false;function j(k,l){var m=[],n=k.photos||k.photo;if(n){if(n instanceof Array){n=c('TypeaheadFacepile').render(n);}else n=c('DOM').create('img',{alt:'',src:n});m.push(n);}var o;if(k.text){var p=k.alias,q=this.value,r=k.text,s=c('UnicodeBidi').isDirectionRTL(r.toString()),t=c('Locale').isRTL(),u=s&&!t?'rtl':!s&&t?'ltr':'';o=[r];if(p&&c('TokenizeUtil').isQueryMatch(q,p)&&!c('TokenizeUtil').isQueryMatch(q,r))o.push(c('DOM').create('span',{className:'alias'},[' \xB7 '+p]));if(k.is_verified){o.push(c('BadgeHelper').renderBadge('xsmall','verified'));}else if(k.is_work_user)o.push(c('BadgeHelper').renderBadge('xsmall','work'));if(k.badge){o.push(c('DOM').create('span',{className:''},' \xB7 '));var v=[k.badge];o.push(c('DOM').create('span',{className:'unSeenPosts'},v));}m.push(c('DOM').create('span',{className:'text',dir:u},o));}if(k.category){var w=[k.category];if(k.is_external)w.push(c('DOM').create('span',{className:'arrow'}));var x=k.message?'preCategory':'category';m.push(c('DOM').create('span',{className:x},w));}if(k.message)m.push(c('DOM').create('span',{className:'category'},[k.message]));var y=k.subtextOverride||k.subtext;if(y){var z=[y];m.push(c('DOM').create('span',{className:'subtext'},z));}var aa=k.classNames||k.type||'',ba=k.is_external?'_blank':'',ca=!k.song&&k.path||'';if(ca){if(!/^https?\:\/\//.test(ca))ca=c('WWWBase').uri+ca.substr(1);ca+=(ca.indexOf('?')>0?'&':'?')+'ref=ts&fref=ts';}var da=c('DOM').create('a',{href:ca,rel:'ignore',target:ba},m),ea=null;if(k.type==='header'){var fa=null,ga=null;if(k.uid==='recent'){ga=new (c('URI'))('/profile.php');ga.setQueryData({sk:'allactivity',log_filter:'search'});fa=h._("EDIT");}else if(k.uid==='pymk'){ga=new (c('URI'))('/find-friends/browser/');fa=h._("SEE ALL");}if(ga){ea=c('DOM').create('a',{href:ga,className:'typeaheadHeaderRightLink'},fa);da.setAttribute('class','typeaheadHeaderLeftLink');aa+=' typeaheadHeader';}}var ha=c('DOM').create('li',{className:aa},[da,ea]);if(k.text){ha.setAttribute('title',k.text);ha.setAttribute('aria-label',k.text);}if(this.showupadatedsuggestions&&!i){j.className+=' updatedSuggestionRows';i=true;}return ha;}j.className='search';f.exports=j;}),null);
__d('legacy:SearchTypeaheadRenderer',['SearchTypeaheadRenderer'],(function a(b,c,d,e,f,g){if(!b.TypeaheadRenderers)b.TypeaheadRenderers={};b.TypeaheadRenderers.search=c('SearchTypeaheadRenderer');}),3);