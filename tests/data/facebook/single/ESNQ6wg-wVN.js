if (self.CavalryLogger) { CavalryLogger.start_js(["xlQNF"]); }

__d("GroupSellProductDetailsEvent",[],(function a(b,c,d,e,f,g){f.exports={PHOTO_CLICK:"photo_click",SHOW_DIALOG:"show_dialog",HIDE_DIALOG:"hide_dialog",PROFILE_LINK_CLICK:"profile_link_click",GROUP_LINK_CLICK:"group_link_click",PERMALINK_CLICK:"permalink_click",ASYNC_DATA_REQUEST_FAIL:"async_data_request_fail",DIALOG_INSTANCE_NULL:"dialog_instance_null",MESSAGE_SELLER_CLICK:"message_seller_click",UFI_CLICK:"ufi_click",MARK_AS_SOLD_CLICK:"mark_as_sold_click",FAILED_SALE_POST_GEN:"failed_sale_post_gen",PHOTO_SWIPE:"photo_swipe",GROUP_POST_LIKE:"group_post_like",GROUP_POST_COMMENT:"group_post_comment",SUGGESTED_ITEM_VPV:"suggested_item_vpv",SUGGESTED_ITEM_CLICK:"suggested_item_click",GROUP_POST_COMMENT_ERROR:"group_post_comment_error",GROUP_POST_COMMENT_TEXT_ENTERED:"group_post_comment_text_entered",GROUP_POST_COMMENT_INPUT_FOCUS:"group_post_comment_input_focus",GROUP_POST_COMMENT_WITH_PHOTO:"group_post_comment_with_photo",GROUP_POST_COMMENT_INPUT_PREDICTIVE_TEXT_PRESS:"group_post_comment_input_predictive_text_press",GROUP_POST_SHARE_CLICK:"group_post_share_click",PDP_INITIAL_LOAD:"pdp_initial_load",PDP_NETWORK_FAILURE:"pdp_network_failure",PDP_RECOMMENDED_ITEMS_GRID_SEE_ALL_PRESS:"pdp_recommended_items_grid_see_all_press",PDP_RECOMMENDED_ITEMS_GRID_ITEM_PRESS:"pdp_recommended_items_grid_item_press",PDP_RECOMMENDED_ITEMS_HSCROLL_SEE_ALL_PRESS:"pdp_recommended_items_hscroll_see_all_press",PDP_RECOMMENDED_ITEMS_HSCROLL_ITEM_PRESS:"pdp_recommended_items_hscroll_item_press"};}),null);
__d("GroupSellProductDetailsImageAspect",[],(function a(b,c,d,e,f,g){f.exports={HORIZONTAL:"horizontal",VERTICAL:"vertical",WIDE_HORIZONTAL:"wide_horizontal",WIDE_VERTICAL:"wide_vertical",SQUARE:"square",HEIGHT_BOUND:"height_bound"};}),null);
__d('UFIAddCommentController',['Parent','React','ReactDOM','UFIAddComment.react','UFIAddCommentActionType','UFICallbackStore','UFICommentEditIDStore','UFIDispatcher','UFIDispatcherContext.react','UFIFeedbackContext.react','UFINewCommentNotifier'],(function a(b,c,d,e,f,g){'use strict';h.factory=function(j,k){k.rootid=j.id;return new h(j,Object.freeze(k));};function h(j,k){i.call(this);this.$UFIAddCommentController1=j;this.$UFIAddCommentController2=k;this.$UFIAddCommentController3=new (c('UFIDispatcher'))();this.$UFIAddCommentController4={UFICallbackStore:new (c('UFICallbackStore'))(this.$UFIAddCommentController3)};this.$UFIAddCommentController4.UFICallbackStore.on(c('UFIAddCommentActionType').SUBMIT_NEW,function(l){return c('UFINewCommentNotifier').onNewComment(c('Parent').byTag(j,'form'),this.$UFIAddCommentController2,l.comment,l.target,l.replyCommentID,l.timestamp);}.bind(this));this.$UFIAddCommentController5=c('UFICommentEditIDStore').getForInstance(this.$UFIAddCommentController2.instanceid);c('UFICommentEditIDStore').addListener(function(){var l=c('UFICommentEditIDStore').getForInstance(this.$UFIAddCommentController2.instanceid);if(l!=this.$UFIAddCommentController5){this.$UFIAddCommentController5=l;this.render();}}.bind(this));this.render();}h.prototype.render=function(){var j=c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIAddCommentController3,stores:this.$UFIAddCommentController4},c('React').createElement(c('UFIFeedbackContext.react'),{contextArgs:this.$UFIAddCommentController2,render:this.renderAddComment}));c('ReactDOM').render(j,this.$UFIAddCommentController1);};h.prototype.disable=function(){this.$UFIAddCommentController4.UFICallbackStore.remove();};var i=function j(){this.renderAddComment=function(k,l){if(this.$UFIAddCommentController5!==null||!l||!l.cancomment||!l.actorforpost)return null;return c('React').createElement(c('UFIAddComment.react'),{viewerActorID:l.actorforpost,replyCommentID:null,targetID:l.ownerid,initialData:null,ref:null,withoutSeparator:null,editingComment:{},isEditing:false,mentionsDataSource:l.mentionsdatasource,showSendOnEnterTip:l.showsendonentertip,multiCompanyGroupsCount:l.multicompanygroupscount,allowPhotoAttachments:l.allowphotoattachments&&!k.islivestreaming,allowVideoAttachments:l.allowvideoattachments&&!k.islivestreaming,allowStickerAttachments:l.allowstickerattachments&&!k.islivestreaming,allowGifAttachments:l.allowgifattachments&&!k.islivestreaming,allowTipJar:l.istipjarenabled&&k.islivestreaming,contextArgs:k,subtitle:l.subtitle,isQAndA:l.isqanda,keepFocus:k.islivestreaming});}.bind(this);};f.exports=h;}),null);
__d('MentionsInputTypeaheadView.react',['cx','MentionsTypeaheadViewItem.react','React'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MentionsInputTypeaheadView1=function(r){var s=r===this.props.highlightedEntry;return (c('React').createElement(c('MentionsTypeaheadViewItem.react'),{key:r.getUniqueID(),entry:r,highlighted:s,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));}.bind(this),n;}l.prototype.render=function(){'use strict';var m="_5u8_"+(!this.props.entries.length?' '+"_5u90":'');return (c('React').createElement('ul',{className:m,role:'listbox',id:this.props.id},this.props.entries.map(this.$MentionsInputTypeaheadView1)));};l.propTypes={id:k.string,highlightedEntry:k.object,entries:k.array.isRequired,onSelect:k.func.isRequired,onHighlight:k.func,onRenderHighlight:k.func};f.exports=l;}),null);
__d('GroupSellProductDetailActionsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:GroupSellProductDetailActionsLoggerConfig',this.$GroupSellProductDetailActionsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:GroupSellProductDetailActionsLoggerConfig',this.$GroupSellProductDetailActionsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$GroupSellProductDetailActionsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$GroupSellProductDetailActionsTypedLogger1=babelHelpers['extends']({},this.$GroupSellProductDetailActionsTypedLogger1,j);return this;};h.prototype.setClientTimeStr=function(j){this.$GroupSellProductDetailActionsTypedLogger1.client_time_str=j;return this;};h.prototype.setEvent=function(j){this.$GroupSellProductDetailActionsTypedLogger1.event=j;return this;};h.prototype.setExceptionMessage=function(j){this.$GroupSellProductDetailActionsTypedLogger1.exception_message=j;return this;};h.prototype.setGroupID=function(j){this.$GroupSellProductDetailActionsTypedLogger1.group_id=j;return this;};h.prototype.setIsEmployee=function(j){this.$GroupSellProductDetailActionsTypedLogger1.is_employee=j;return this;};h.prototype.setReferralSurface=function(j){this.$GroupSellProductDetailActionsTypedLogger1.referral_surface=j;return this;};h.prototype.setStoryID=function(j){this.$GroupSellProductDetailActionsTypedLogger1.story_id=j;return this;};h.prototype.setSurface=function(j){this.$GroupSellProductDetailActionsTypedLogger1.surface=j;return this;};h.prototype.setVC=function(j){this.$GroupSellProductDetailActionsTypedLogger1.vc=j;return this;};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$GroupSellProductDetailActionsTypedLogger1=babelHelpers['extends']({},this.$GroupSellProductDetailActionsTypedLogger1,j);return this;};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l);};var i={client_time_str:true,event:true,exception_message:true,group_id:true,is_employee:true,referral_surface:true,story_id:true,surface:true,vc:true};f.exports=h;}),null);
__d('GroupCommerceProductDetailImageContainer.react',['cx','DOM','Event','GroupSellProductDetailActionsTypedLogger','GroupSellProductDetailsEvent','GroupSellProductDetailsImageAspect','Image.react','React','ScrollableArea.react','Style','Vector'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=38,m=483;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(o,p){j.constructor.call(this,o,p);this.$GroupCommerceProductDetailImageContainer6=function(event){var q=event.target;while(q){if(q.id===this.props.ufiID)return;q=q.parentElement;}switch(event.keyCode){case 37:case 38:event.stopPropagation();this.$GroupCommerceProductDetailImageContainer9();break;case 39:case 40:event.stopPropagation();this.$GroupCommerceProductDetailImageContainer10();break;}}.bind(this);this.$GroupCommerceProductDetailImageContainer11=function(q){new (c('GroupSellProductDetailActionsTypedLogger'))().setEvent(c('GroupSellProductDetailsEvent').PHOTO_CLICK).setStoryID(this.props.storyID).setGroupID(this.props.group.id).log();this.$GroupCommerceProductDetailImageContainer7(q,this.props.media);this.setState({currentIndex:q});}.bind(this);this.state={currentIndex:0,stageWidth:m,stageHeight:558};}n.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement('div',{className:"_57xm"},this.$GroupCommerceProductDetailImageContainer2()),c('React').createElement('div',{className:"_57xn"},this.props.media.length==0?this.$GroupCommerceProductDetailImageContainer3():this.$GroupCommerceProductDetailImageContainer4()));};n.prototype.componentDidUpdate=function(o,p){if(this.props.media&&this.props.media.length>1&&this.props.media!==o.media){this.$GroupCommerceProductDetailImageContainer5();this.$GroupCommerceProductDetailImageContainer1=c('Event').listen(document.body,'keydown',this.$GroupCommerceProductDetailImageContainer6);}else if(!this.props.media||this.props.media.length<1)this.$GroupCommerceProductDetailImageContainer5();};n.prototype.componentWillUnmount=function(){this.$GroupCommerceProductDetailImageContainer5();};n.prototype.componentWillReceiveProps=function(o){var p,q=this;if(this.props.media!==o.media){var r=0;if(o.media.length<1){this.setState({stageWidth:m});}else (function(){var s=q.props.query;if(s&&s.fbid){r=o.media.findIndex(function(t){return t.id.toString()===s.fbid;});if(r==-1)r=0;}q.$GroupCommerceProductDetailImageContainer7(r,o.media);})();this.setState({currentIndex:r});}};n.prototype.$GroupCommerceProductDetailImageContainer3=function(){var o=this.props.elem;if(!o)return null;var p=c('DOM').scry(o,'img')[0],q=c('DOM').scry(o,'i')[0];if(p){var r=c('Vector').from(p.naturalWidth,p.naturalHeight);return c('React').createElement(c('Image.react'),{className:"_580_",width:r.x,height:r.y,src:p.src,style:this.$GroupCommerceProductDetailImageContainer8(r.x,r.y)});}else if(q){var s=c('Style').get(q,'backgroundImage').replace(/.*url\("?([^"]*)"?\).*/,'$1');return c('React').createElement(c('Image.react'),{className:"_580_",src:s});}return null;};n.prototype.$GroupCommerceProductDetailImageContainer5=function(){if(this.$GroupCommerceProductDetailImageContainer1){this.$GroupCommerceProductDetailImageContainer1.remove();this.$GroupCommerceProductDetailImageContainer1=null;}};n.prototype.$GroupCommerceProductDetailImageContainer7=function(o,p){var q=p[o],r=this.state.stageWidth;switch(q.aspect){case c('GroupSellProductDetailsImageAspect').HORIZONTAL:case c('GroupSellProductDetailsImageAspect').WIDE_HORIZONTAL:r=744;break;case c('GroupSellProductDetailsImageAspect').WIDE_VERTICAL:r=314;break;case c('GroupSellProductDetailsImageAspect').VERTICAL:r=419;break;case c('GroupSellProductDetailsImageAspect').SQUARE:r=558;break;case c('GroupSellProductDetailsImageAspect').HEIGHT_BOUND:r=q.width;break;}this.props.onResize(q.aspect,r);this.setState({stageWidth:r});};n.prototype.$GroupCommerceProductDetailImageContainer10=function(){var o=this.state.currentIndex+1,p=this.props.media.length-1;if(o>p)o=0;this.$GroupCommerceProductDetailImageContainer11(o);};n.prototype.$GroupCommerceProductDetailImageContainer9=function(){var o=this.state.currentIndex-1,p=this.props.media.length-1;if(o<0)o=p;this.$GroupCommerceProductDetailImageContainer11(o);};n.prototype.$GroupCommerceProductDetailImageContainer4=function(){var o=[],p=this.props.media.length;for(var q=0;q<p;q++){var r=this.props.media[q];o.push(c('React').createElement(c('Image.react'),{className:(this.state.currentIndex!=q?"_5810":'')+(' '+"_580_"),width:r.width,height:r.height,src:r.uri,key:'stage'+r.id,style:this.$GroupCommerceProductDetailImageContainer8(r.width,r.height)}));}return o;};n.prototype.$GroupCommerceProductDetailImageContainer8=function(o,p){var q=0;if(o>this.state.stageWidth){q=this.state.stageWidth/o;o*=q;p*=q;}if(p>this.state.stageHeight){q=this.state.stageHeight/p;o*=q;p*=q;}return {paddingTop:(this.state.stageHeight-p)/2+'px',paddingLeft:(this.state.stageWidth-o)/2+'px',maxWidth:this.state.stageWidth,maxHeight:this.state.stageHeight};};n.prototype.$GroupCommerceProductDetailImageContainer2=function(){var o=[],p=this.props.media.length;for(var q=0;q<p;q++){var r=this.props.media[q];o.push(c('React').createElement(c('Image.react'),{className:"_5811"+(this.state.currentIndex==q?' '+"_5812":''),width:l,height:l,src:r.uriThumb,onClick:this.$GroupCommerceProductDetailImageContainer11.bind(this,q),key:'thumbnail'+r.id}));}return (c('React').createElement('div',null,c('React').createElement(c('ScrollableArea.react'),{height:this.props.maxHeight,shadow:false},o),c('React').createElement('div',{className:"_2dh4",style:{width:l}})));};n.propTypes={elem:k.object,group:k.object.isRequired,maxHeight:k.number.isRequired,media:k.any.isRequired,onResize:k.func.isRequired,query:k.object,storyID:k.string,ufiID:k.string.isRequired};f.exports=n;}),null);
__d('GroupCommerceProductDetailPivotItem.react',['cx','Image.react','Link.react','React','Relay','Tooltip.react','XUICard.react','XUICardSection.react','XUIText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=148;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.pivotItem.primary_photo,n=m?this.props.pivotItem.snowlift_uri:null,o=m?null:this.props.pivotItem.story.url,p=m?'theater':undefined;return (c('React').createElement('div',{className:"_179c"},c('React').createElement(c('Link.react'),{ajaxify:n,href:o,rel:p},c('React').createElement(c('XUICard.react'),{className:"_3-8h",style:{width:k}},this.renderImage(),c('React').createElement(c('XUICardSection.react'),{className:"_2pi8 _2pi2 _4bqg"},c('React').createElement(c('XUIText.react'),{className:"_4bqh",display:'block',weight:'bold',size:'small'},this.props.pivotItem.group_commerce_item_title),c('React').createElement(c('XUIText.react'),{className:"_179d _4bqh",display:'block',size:'small'},this.props.pivotItem.formatted_price.text))))));};l.prototype.renderImage=function(){if(this.props.pivotItem.primary_photo)return (c('React').createElement(c('Image.react'),{width:k,height:k,src:this.props.pivotItem.primary_photo.image.uri}));return (c('React').createElement('div',{className:"_5xvt",style:{width:k,height:k}}));};function l(){i.apply(this,arguments);}f.exports=c('Relay').createContainer(l,{initialVariables:{image_size:k},fragments:{pivotItem:function m(){return function(){return {children:[{fieldName:'group_commerce_item_title',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'text',kind:'Field',metadata:{},type:'String'}],fieldName:'formatted_price',kind:'Field',metadata:{canHaveSubselections:true},type:'TextWithEntities'},{children:[{calls:[{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallVariable',callVariableName:'image_size'}},{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallVariable',callVariableName:'image_size'}},{kind:'Call',metadata:{},name:'sizing',value:{kind:'CallValue',callValue:'cover-fill'}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'primary_photo',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Photo'},{fieldName:'snowlift_uri',kind:'Field',metadata:{},type:'Url'},{children:[{fieldName:'url',kind:'Field',metadata:{},type:'Url'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'story',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Story'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'GroupCommerceProductDetailPivotItem_react_PivotItemRelayQL',type:'GroupCommerceProductItem'};}();}}});}),null);
__d('GroupCommerceProductDetailPivots.react',['cx','fbt','ix','GroupCommerceProductDetailPivotItem.react','Image.react','Layout.react','React','Relay','XUICarousel.react','XUICarouselAnimator','XUICarouselArrow.react','XUICarouselItem.react','XUIGrayText.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('Layout.react').Column,n=c('React').PropTypes,o=12,p=8;k=babelHelpers.inherits(q,c('React').Component);l=k&&k.prototype;q.prototype.render=function(){if(!this.props.groupCommerceProductItem||!this.props.groupCommerceProductItem.top_related_products||!this.props.groupCommerceProductItem.top_related_products.edges||this.props.groupCommerceProductItem.top_related_products.edges.length<o)return null;var r=this.props.groupCommerceProductItem.top_related_products.edges.map(function(u){return (c('React').createElement(c('XUICarouselItem.react'),{className:"_3-8_",key:u.node.id},c('React').createElement(c('GroupCommerceProductDetailPivotItem.react'),{pivotItem:u.node})));}),s=c('React').createElement(c('XUICarouselArrow.react'),null,c('React').createElement(c('Image.react'),{alt:i._("Previous"),src:j("101565")})),t=c('React').createElement(c('XUICarouselArrow.react'),null,c('React').createElement(c('Image.react'),{alt:i._("Next"),src:j("101566")}));return (c('React').createElement('div',{className:"_2pie _39ha"},c('React').createElement(c('XUIGrayText.react'),{className:"_3-94",shade:'light',size:'small',weight:'bold',display:'block'},i._("SEE MORE ITEMS")),c('React').createElement(c('XUICarousel.react'),{animator:new (c('XUICarouselAnimator'))({type:'horizontal',centered:false,firstAndLastAligned:true}),arrows:[s,t],initialAutoplay:false,viewportWidth:this.props.width-p*2,wrapAround:false},r)));};function q(){k.apply(this,arguments);}q.propTypes={width:n.number.isRequired};f.exports=c('Relay').createContainer(q,{initialVariables:{count:o},fragments:{groupCommerceProductItem:function r(){return function(s){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallVariable',callVariableName:'count'}}],children:[{fieldName:'count',kind:'Field',metadata:{},type:'Int'},{children:[{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},c('Relay').QL.__frag(s)]),fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'GroupCommerceProductItem'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'ProductToTopRelatedProductsEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],fieldName:'top_related_products',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'ProductToTopRelatedProductsConnection'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'GroupCommerceProductDetailPivots_react_GroupCommerceProductItemRelayQL',type:'GroupCommerceProductItem'};}(c('GroupCommerceProductDetailPivotItem.react').getFragment('pivotItem'));}}});}),null);
__d('GroupCommerceProductDetailPivotsRoute',['Relay'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('Relay').Route);i=h&&h.prototype;function j(){h.apply(this,arguments);}j.routeName='GroupCommerceProductDetailPivotsRoute';j.path='/product_details/top_related_products/{id}';j.paramDefinitions={id:{type:'Number',required:true}};j.queries={groupCommerceProductItem:function k(l){return function(m){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:{kind:'CallVariable',callVariableName:'id'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},c('Relay').QL.__frag(m)]),fieldName:'node',kind:'Query',metadata:{isAbstract:true,identifyingArgName:'id',identifyingArgType:'ID!'},name:'GroupCommerceProductDetailPivotsRoute',type:'Node'};}(l.getFragment('groupCommerceProductItem'));}};f.exports=j;}),null);
__d('GroupCommerceProductDetailPivotsRelayContainer.react',['GroupCommerceProductDetailPivots.react','GroupCommerceProductDetailPivotsRoute','React','RelayRootContainer'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=new (c('GroupCommerceProductDetailPivotsRoute'))({id:this.props.groupCommerceProductID});return (c('React').createElement(c('RelayRootContainer'),{Component:c('GroupCommerceProductDetailPivots.react'),route:l,renderFetched:function(m){return (c('React').createElement(c('GroupCommerceProductDetailPivots.react'),babelHelpers['extends']({},m,{width:this.props.width})));}.bind(this)}));};function k(){h.apply(this,arguments);}k.propTypes={groupCommerceProductID:j.number.isRequired,width:j.number.isRequired};f.exports=k;}),null);
__d('GroupCommerceProductDetailRHCContent.react',['cx','ix','GroupSellProductDetailActionsTypedLogger','GroupSellProductDetailsEvent','Image.react','Link.react','React','XUIText.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.$GroupCommerceProductDetailRHCContent1(),o=this.$GroupCommerceProductDetailRHCContent2();return (c('React').createElement('div',{className:"_4g63"+(!this.props.actor.profilePicURI?' '+"_34xy":'')},c('React').createElement('div',{className:"_4g65"},o,n,c('React').createElement(c('XUIText.react'),{className:"_4g66"},this.props.product.price),c('React').createElement('div',{className:"_4g67"},this.props.description),c('React').createElement('div',{className:"_4g68"},this.props.actionButton)),c('React').createElement('div',{className:"_4g6d",onClick:function(){new (c('GroupSellProductDetailActionsTypedLogger'))().setEvent(c('GroupSellProductDetailsEvent').UFI_CLICK).setStoryID(this.props.storyID).setGroupID(this.props.group.id).log();}.bind(this),ref:'ufi',role:'presentation'},this.props.ufi)));};m.prototype.$GroupCommerceProductDetailRHCContent2=function(){var n=this.props.product.statusText?this.props.product.statusText+' '+this.props.product.title:this.props.product.title;return (c('React').createElement(c('XUIText.react'),{id:this.props.titleID,className:"_4g6e"},n));};m.prototype.$GroupCommerceProductDetailRHCContent1=function(){var n=!this.props.product.deliveryNote?null:c('React').createElement(c('XUIText.react'),{display:'inline'},this.props.product.deliveryNote),o=n?c('React').createElement(c('Image.react'),{className:"_4g6g",src:i("75362")}):null;return (c('React').createElement('div',{className:"_4g6h"},o,c('React').createElement(c('XUIText.react'),null,n)));};function m(){j.apply(this,arguments);}m.propTypes={actor:l.object.isRequired,product:l.object.isRequired,group:l.object.isRequired,feedback:l.object.isRequired,ufi:l.any.isRequired,actionButton:l.any.isRequired,storyID:l.string,description:l.any.isRequired,titleID:l.string};f.exports=m;}),null);
__d('GroupCommerceProductDetailRHCFooter.react',['cx','Event','MentionsInputTypeaheadView.react','React','ReactDOM','UFIAddCommentController','UFIMentionsInputProxy.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.componentDidMount=function(){this.$GroupCommerceProductDetailRHCFooter1=c('Event').listen(c('ReactDOM').findDOMNode(this.refs.ufiAddComment),'keydown',this.$GroupCommerceProductDetailRHCFooter2);};l.prototype.createUFIAddComment=function(m){if(m.ufi&&m.ufi.params){m.ufi.params.mentionsinput={inputComponent:c('UFIMentionsInputProxy.react'),viewComponent:c('MentionsInputTypeaheadView.react')};c('UFIAddCommentController').factory(c('ReactDOM').findDOMNode(this.refs.ufiAddComment),m.ufi.params);}};l.prototype.componentWillUnmount=function(){if(this.$GroupCommerceProductDetailRHCFooter1){this.$GroupCommerceProductDetailRHCFooter1.remove();this.$GroupCommerceProductDetailRHCFooter1=null;}};l.prototype.render=function(){return (c('React').createElement('div',{className:"_3g6i"+(!this.props.actor.profilePicURI?' '+"_34xy":''),key:this.props.ufiInstanceID,ref:'ufiAddComment'}));};l.prototype.$GroupCommerceProductDetailRHCFooter2=function(event){switch(event.keyCode){case 37:case 38:case 39:case 40:event.stopPropagation();break;}};function l(){i.apply(this,arguments);}l.propTypes={ufiInstanceID:k.string.isRequired,ufi:k.object.isRequired,actor:k.object.isRequired};f.exports=l;}),null);
__d('GroupCommerceProductDetailRHCHeader.react',['cx','ix','GroupSellProductDetailActionsTypedLogger','GroupSellProductDetailsEvent','Image.react','Link.react','React','ReactLayeredComponentMixin_DEPRECATED','XUIContextualDialog.react','XUIContextualDialogBody.react','classWithMixins','isEmpty','mixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=104,n=40;j=babelHelpers.inherits(o,c('classWithMixins')(c('React').Component,c('mixin')(c('ReactLayeredComponentMixin_DEPRECATED'))));k=j&&j.prototype;o.prototype.renderLayers=function(){return {actorDialog:c('React').createElement(c('XUIContextualDialog.react'),{contextRef:function(){return this.refs.actorName;}.bind(this),shown:true,hoverContextRef:function(){return this.refs.actorName;}.bind(this),hideOnEscape:true,hoverHideDelay:0,hoverShowDelay:500,autoFocus:false,width:c('XUIContextualDialog.react').WIDTH.WIDE,position:'below'},c('React').createElement(c('XUIContextualDialogBody.react'),null,c('React').createElement('div',{id:this.props.actorHoverID}))),actorImageDialog:c('React').createElement(c('XUIContextualDialog.react'),{contextRef:function(){return this.refs.actorImage;}.bind(this),shown:true,hoverContextRef:function(){return this.refs.actorImage;}.bind(this),hideOnEscape:true,hoverHideDelay:0,hoverShowDelay:500,autoFocus:false,width:c('XUIContextualDialog.react').WIDTH.WIDE,position:'below'},c('React').createElement(c('XUIContextualDialogBody.react'),null,c('React').createElement('div',{id:this.props.actorImageHoverID}))),groupDialog:c('React').createElement(c('XUIContextualDialog.react'),{contextRef:function(){return this.refs.groupName;}.bind(this),shown:true,hoverContextRef:function(){return this.refs.groupName;}.bind(this),hideOnEscape:true,hoverHideDelay:0,hoverShowDelay:500,autoFocus:false,width:c('XUIContextualDialog.react').WIDTH.WIDE,position:'below'},c('React').createElement(c('XUIContextualDialogBody.react'),null,c('React').createElement('div',{id:this.props.groupHoverID})))};};o.prototype.render=function(){return (c('React').createElement('div',{className:"_34xx"+(!this.props.actor.profilePicURI?' '+"_34xy":'')},c('React').createElement(c('Image.react'),{className:"_34xz",width:n,height:n,src:this.props.actor.profilePicURI,ref:'actorImage'}),c('React').createElement('div',{className:"_34x-"},c('React').createElement('div',{className:"_34x_"},c('React').createElement('div',{ref:'actorName',className:"_34y0"},c('React').createElement(c('Link.react'),{href:this.props.actor.uri,onClick:function(){new (c('GroupSellProductDetailActionsTypedLogger'))().setEvent(c('GroupSellProductDetailsEvent').PROFILE_LINK_CLICK).setStoryID(this.props.storyID).setGroupID(this.props.group.id).log();this.props.hideDialog();}.bind(this)},this.props.actor.name)),!c('isEmpty')(this.props.group)?c('React').createElement(c('Image.react'),{className:"_34y1",src:i("82443")}):null,c('React').createElement('div',{ref:'groupName',className:"_34y0"},c('React').createElement(c('Link.react'),{href:this.props.group.uri,onClick:function(){new (c('GroupSellProductDetailActionsTypedLogger'))().setEvent(c('GroupSellProductDetailsEvent').GROUP_LINK_CLICK).setStoryID(this.props.storyID).setGroupID(this.props.group.id).log();this.props.hideDialog();}.bind(this)},this.props.group.name))),c('React').createElement('div',{className:"_4g6i"},c('React').createElement(c('Link.react'),{href:this.props.product.uri,onClick:function(){new (c('GroupSellProductDetailActionsTypedLogger'))().setEvent(c('GroupSellProductDetailsEvent').PERMALINK_CLICK).setStoryID(this.props.storyID).setGroupID(this.props.group.id).log();this.props.hideDialog();}.bind(this)},this.props.timestamp))),c('React').createElement('div',{id:this.props.chevronID})));};o.prototype.componentDidUpdate=function(p,q){var r=this.refs.actorName.offsetWidth,s=m-r;this.refs.groupName.style.maxWidth=m+s+'px';};function o(){j.apply(this,arguments);}o.propTypes={actor:l.object.isRequired,group:l.object.isRequired,storyID:l.string,actorHoverID:l.string.isRequired,actorImageHoverID:l.string.isRequired,groupHoverID:l.string.isRequired,chevronID:l.string.isRequired,product:l.object.isRequired,timestamp:l.any.isRequired};f.exports=o;}),null);
__d("XGroupCommerceMarketplaceProductDetailController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/marketplace\/product_detail\/",{sale_post_id:{type:"FBID",required:true},ufi_id:{type:"String",required:true},date_time_id:{type:"String",required:true},action_button_id:{type:"String",required:true},actor_dialog_id:{type:"String",required:true},actor_image_dialog_id:{type:"String",required:true},description_id:{type:"String",required:true},title_id:{type:"String",required:true},group_hover_id:{type:"String",required:true},ufi_instance_id:{type:"String",required:true},chevron_id:{type:"String",required:true}});}),null);
__d("XGroupCommerceMarketplaceSimilarProductsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/marketplace\/similar_products\/",{rid:{type:"Int"},rt:{type:"Enum",enumType:0},location:{type:"Enum",enumType:1},share_id:{type:"Int"},sale_post_id:{type:"FBID",required:true},post_dom_id:{type:"String",required:true},render_location:{type:"Enum",required:true,enumType:1}});}),null);
__d('GroupCommerceProductDetail.react',['csx','cx','fbt','Arbiter','AsyncRequest','GroupSellProductDetailActionsTypedLogger','GroupSellProductDetailsEvent','GroupSellProductDetailsImageAspect','LayerFadeOnHide','LayerHideOnEscape','LeftRight.react','GroupCommerceProductDetailPivotsRelayContainer.react','GroupCommerceProductDetailRHCHeader.react','GroupCommerceProductDetailImageContainer.react','GroupCommerceProductDetailRHCContent.react','GroupCommerceProductDetailRHCFooter.react','Parent','React','ReactRenderer','ResponsiveBlock.react','ScrollableArea.react','XGroupCommerceMarketplaceProductDetailController','XGroupCommerceMarketplaceSimilarProductsController','XUIDialog.react','XUIDialogTitle.react','XUIDialogBody.react','guid'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=495,n=530,o=891;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(q,r){l.constructor.call(this,q,r);this.hideDialog=function(){this.$GroupCommerceProductDetail3(false);}.bind(this);this.$GroupCommerceProductDetail6=function(t,u){var v=this.state.width;switch(t){case c('GroupSellProductDetailsImageAspect').HORIZONTAL:case c('GroupSellProductDetailsImageAspect').WIDE_HORIZONTAL:v=1153;break;case c('GroupSellProductDetailsImageAspect').WIDE_VERTICAL:v=723;break;case c('GroupSellProductDetailsImageAspect').VERTICAL:v=828;break;case c('GroupSellProductDetailsImageAspect').SQUARE:v=967;break;case c('GroupSellProductDetailsImageAspect').HEIGHT_BOUND:v=u+409;break;}this.setState({width:v});}.bind(this);this.$GroupCommerceProductDetail4=function(t,u){if(u>m)u=m;this.setState({rhcHeight:u});}.bind(this);this.$GroupCommerceProductDetail3=function(t){if(p.$GroupCommerceProductDetail9!==null)this.setState({isDialogShown:t});if(!t){new (c('GroupSellProductDetailActionsTypedLogger'))().setEvent(c('GroupSellProductDetailsEvent').HIDE_DIALOG).setStoryID(this.state.payload.storyID).setGroupID(this.state.payload.group.id).log();this.props.onHide&&this.props.onHide();if(p.$GroupCommerceProductDetail9!==null)setTimeout(function(){this.setState({payload:this.$GroupCommerceProductDetail7(),query:null,elem:null});}.bind(this));}}.bind(this);this.$GroupCommerceProductDetail5=function(t){new (c('GroupSellProductDetailActionsTypedLogger'))().setEvent(c('GroupSellProductDetailsEvent').SHOW_DIALOG).setStoryID(t.payload.storyID).setGroupID(t.payload.group.id).log();this.setState({payload:t.payload,isDialogShown:true});}.bind(this);var s=this;s.hideDialog=this.hideDialog.bind(this);s.showDialog=this.showDialog.bind(this);s.$GroupCommerceProductDetail3=this.$GroupCommerceProductDetail3.bind(this);s.$GroupCommerceProductDetail4=this.$GroupCommerceProductDetail4.bind(this);s.$GroupCommerceProductDetail5=this.$GroupCommerceProductDetail5.bind(this);s.$GroupCommerceProductDetail6=this.$GroupCommerceProductDetail6.bind(this);this.$GroupCommerceProductDetail2={};this.state={isDialogShown:false,width:o,rhcHeight:200,payload:this.$GroupCommerceProductDetail7(),ufiID:'ufi_detail_'+c('guid')(),datetimeID:'datetime_'+c('guid')(),actionButtonID:'actionButton'+c('guid')(),actorHoverID:'actorHoverID'+c('guid')(),actorImageHoverID:'actorImageHoverID'+c('guid')(),descriptionID:'descriptionID'+c('guid')(),titleID:'titleID'+c('guid')(),groupHoverID:'groupHoverID'+c('guid')(),ufiInstanceID:'ufiInstanceID'+c('guid')(),chevronID:'chevronID'+c('guid')(),query:null,elem:null,salePostID:null};}p.prototype.componentDidMount=function(){this.$GroupCommerceProductDetail1=c('Arbiter').subscribe('XComposerEditDialog/doneEditing',function(){this.$GroupCommerceProductDetail8(this.state.salePostID);}.bind(this));};p.prototype.componentWillUnmount=function(){var q=this.refs.modal;if(q!=null)q.layer.hide();p.$GroupCommerceProductDetail9=null;this.$GroupCommerceProductDetail1&&this.$GroupCommerceProductDetail1.unsubscribe();this.$GroupCommerceProductDetail1=null;};p.prototype.render=function(){if(!this.state.isDialogShown)return null;var q=c('React').createElement('span',{id:this.state.datetimeID}),r=c('React').createElement('div',{id:this.state.ufiID}),s=c('React').createElement('div',{id:this.state.actionButtonID}),t=c('React').createElement('div',{className:"_3g5q",id:this.state.descriptionID});return c('React').createElement(c('XUIDialog.react'),{shown:true,onToggle:this.$GroupCommerceProductDetail3,ref:'modal',width:this.state.width,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerHideOnEscape:c('LayerHideOnEscape')}},c('React').createElement(c('XUIDialogTitle.react'),null,j._("Item Details")),c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement('div',{className:"_3g6d"},c('React').createElement(c('LeftRight.react'),null,c('React').createElement('div',{className:"_3g6e"},c('React').createElement(c('GroupCommerceProductDetailImageContainer.react'),{elem:this.state.elem,group:this.state.payload.group,maxHeight:n,media:this.state.payload.media,onResize:this.$GroupCommerceProductDetail6,query:this.state.query,storyID:this.state.payload.storyID,ufiID:this.state.ufiID})),c('React').createElement('div',{className:"_3g6f"},c('React').createElement(c('ScrollableArea.react'),{className:"_3g6g",height:this.state.rhcHeight},c('React').createElement(c('ResponsiveBlock.react'),{className:"_3g6h",onResize:this.$GroupCommerceProductDetail4},c('React').createElement(c('GroupCommerceProductDetailRHCHeader.react'),{actor:this.state.payload.actor,group:this.state.payload.group,hideDialog:this.hideDialog,storyID:this.state.payload.storyID,actorHoverID:this.state.actorHoverID,actorImageHoverID:this.state.actorImageHoverID,groupHoverID:this.state.groupHoverID,chevronID:this.state.chevronID,product:this.state.payload.product,timestamp:q}),c('React').createElement(c('GroupCommerceProductDetailRHCContent.react'),{actor:this.state.payload.actor,product:this.state.payload.product,group:this.state.payload.group,feedback:this.state.payload.feedback,actionButton:s,ufi:r,hideDialog:this.hideDialog,storyID:this.state.payload.storyID,description:t,titleID:this.state.titleID}))),c('React').createElement(c('GroupCommerceProductDetailRHCFooter.react'),{actor:this.state.payload.actor,ref:'rhcFooter',className:"_3g6i",ufiInstanceID:this.state.ufiInstanceID,ufi:this.state.payload.ufi}))),this.$GroupCommerceProductDetail10())));};p.prototype.showDialog=function(q,r,s){this.$GroupCommerceProductDetail8(q);this.setState({payload:this.$GroupCommerceProductDetail7(),salePostID:q,query:r,elem:s,isDialogShown:true,width:o});this.$GroupCommerceProductDetail11(q,s);};p.prototype.$GroupCommerceProductDetail10=function(){var q=this.state.payload.product;if(!q.id||!q.showPivots)return null;return c('React').createElement(c('GroupCommerceProductDetailPivotsRelayContainer.react'),{groupCommerceProductID:q.id,width:this.state.width});};p.prototype.$GroupCommerceProductDetail8=function(q){var r=c('XGroupCommerceMarketplaceProductDetailController').getURIBuilder().setFBID('sale_post_id',q).setString('ufi_id',this.state.ufiID).setString('date_time_id',this.state.datetimeID).setString('action_button_id',this.state.actionButtonID).setString('actor_dialog_id',this.state.actorHoverID).setString('actor_image_dialog_id',this.state.actorImageHoverID).setString('description_id',this.state.descriptionID).setString('title_id',this.state.titleID).setString('group_hover_id',this.state.groupHoverID).setString('ufi_instance_id',this.state.ufiInstanceID).setString('chevron_id',this.state.chevronID).getURI();new (c('AsyncRequest'))().setURI(r).setMethod('GET').setHandler(this.$GroupCommerceProductDetail5).setErrorHandler(function(s){new (c('GroupSellProductDetailActionsTypedLogger'))().setEvent(c('GroupSellProductDetailsEvent').ASYNC_DATA_REQUEST_FAIL).setStoryID(q.toString()).log();}).setReadOnly(true).send();};p.prototype.$GroupCommerceProductDetail11=function(q,r){var s=r&&c('Parent').bySelector(r,"._4-u2");if(!r||!r.dataset.renderLocation||!s)return;var t=s.id;if(!t||this.$GroupCommerceProductDetail2[t])return;this.$GroupCommerceProductDetail2[t]=true;var u=c('XGroupCommerceMarketplaceSimilarProductsController').getURIBuilder().setFBID('sale_post_id',q).setString('post_dom_id',t).setEnum('render_location',r.dataset.renderLocation).getURI();new (c('AsyncRequest'))().setURI(u).setMethod('GET').setHandler(this.$GroupCommerceProductDetail12).setErrorHandler(function(v){}).setReadOnly(true).send();};p.prototype.$GroupCommerceProductDetail12=function(q){var r=q.getPayload();if(!r||!r.length)return;};p.prototype.$GroupCommerceProductDetail7=function(){return {actor:{profilePicURI:null},group:{},product:{},feedback:{},media:[],ufi:{}};};p.init=function(q){var r=c('ReactRenderer').constructAndRenderComponent(p,{},q);p.$GroupCommerceProductDetail13=q;p.$GroupCommerceProductDetail9=r;if(p.$GroupCommerceProductDetail14){p.showDialog(p.$GroupCommerceProductDetail14,p.$GroupCommerceProductDetail15,p.$GroupCommerceProductDetail16);p.$GroupCommerceProductDetail14=null;p.$GroupCommerceProductDetail15=null;p.$GroupCommerceProductDetail16=null;}};p.showDialog=function(q,r,s){if(!p.$GroupCommerceProductDetail9){if(!p.$GroupCommerceProductDetail13){p.$GroupCommerceProductDetail14=q;p.$GroupCommerceProductDetail15=r;p.$GroupCommerceProductDetail16=s;return;}p.init(p.$GroupCommerceProductDetail13);}if(!p.$GroupCommerceProductDetail9){new (c('GroupSellProductDetailActionsTypedLogger'))().setEvent(c('GroupSellProductDetailsEvent').DIALOG_INSTANCE_NULL).setStoryID(q.toString()).log();return;}p.$GroupCommerceProductDetail9.showDialog(q,r,s);};p.$GroupCommerceProductDetail9=null;p.$GroupCommerceProductDetail14=null;p.$GroupCommerceProductDetail13=null;p.$GroupCommerceProductDetail16=null;p.$GroupCommerceProductDetail15=null;f.exports=p;}),null);
__d('GroupCommerceProductDetailLayer',['Layer','GroupCommerceProductDetail.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('Layer'));i=h&&h.prototype;j.prototype._buildWrapper=function(k,l){c('GroupCommerceProductDetail.react').init(l);return l;};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('OGHovercardLayerHideOnBlur',['ContextualThing','DOM','Event'],(function a(b,c,d,e,f,g){function h(i){this._layer=i;}Object.assign(h.prototype,{_subscriptions:null,_clickListener:null,enable:function i(){this._subscriptions=[this._layer.subscribe('show',this._attach.bind(this)),this._layer.subscribe('hide',this._detach.bind(this))];if(this._layer.isShown())this._attach();},disable:function i(){this._detach();while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;},_detach:function i(){this._clickListener&&this._clickListener.remove();this._clickListener=null;},_attach:function i(){setTimeout(function(){this._clickListener=c('Event').listen(document.documentElement,'click',this._maybeHide.bind(this));}.bind(this),0);},_maybeHide:function i(event){var j=event.getTarget();if(c('DOM').contains(this._layer.getContent(),j)||c('ContextualThing').containsIncludingLayers(this._layer.getContentRoot(),j))return;if(this._shouldHide(event))this._layer.hide();},_shouldHide:function i(event){return true;}});f.exports=h;}),null);
__d('OGAggregationHovercardTarget',['cx','fbt','Event','ArbiterMixin','AsyncRequest','ContextualDialog','ContextualDialogArrow','CSS','DOM','LayerHideOnBlur','LayerHideOnEscape','OGHovercardLayerHideOnBlur'],(function a(b,c,d,e,f,g,h,i){var j=350,k={};function l(n){return new (c('ContextualDialog'))({addedBehaviors:[c('LayerHideOnBlur'),c('LayerHideOnEscape')],arrowBehavior:c('ContextualDialogArrow'),classNames:[n]},c('DOM').create('div',{className:"_4q1"},i._("Loading..."))).setWidth(j);}Object.assign(m,{setHovercard:function n(o,p){var q=k[o];q&&q.setHovercard(p);}});function m(n,o,p,q,r,s,t,u,v){k[o]=this;this._targetID=o;this._endpoint=p;this._preventClose=r||[];this._position=t||'below';this._dialogClass=u||'';this._fetchOnHover=v;this.init(n);for(var w=0,x=q.length;w<x;w++){var y=q[w];this.addTrigger(y.element,y.trigger_class,y.context);}if(s)this.showHovercard(null,null);}Object.assign(m.prototype,c('ArbiterMixin'),{init:function n(o){this._hovercardShown=false;this._hovercardScheduled=false;this._target=o;this._triggers=[];this._hovercard=null;this._fetching=false;this._placeholder=null;this._placeholderListener=null;this._shownClass='hover_shown';this._triggerClass=null;this._currentTrigger=null;this._context=null;return this;},addTrigger:function n(o,p,q){this._triggers.push(o);c('Event').listen(o,'click',this._onTriggerClick.bind(this,o,p,q));if(this._fetchOnHover)c('Event').listen(o,'mouseover',this._onTriggerMouseOver.bind(this));},_onTriggerMouseOver:function n(){this._fetch();},_onTriggerClick:function n(o,p,q){q=q||this._target;if(this._hovercardShown&&this._hovercard.getContext()===q||this._hovercardScheduled&&this._placeholder.getContext()===q||(this._hovercardShown||this._hovercardScheduled)&&this._currentTrigger===o){this._currentTrigger=null;this.hideHovercard();return;}this.hideHovercard();this._currentTrigger=o;this.showHovercard(p,q);},_fetch:function n(){if(this._hovercard!=null||this._fetching)return;this._fetching=true;var o=function q(){this._fetching=false;},p=function q(){this.hideHovercard();};new (c('AsyncRequest'))(this._endpoint).setData({hover_target:this._targetID}).setMethod('GET').setReadOnly(true).setErrorHandler(p.bind(this)).setTransportErrorHandler(p.bind(this)).setFinallyHandler(o.bind(this)).send();},setHovercard:function n(o){var p,q,r=this;this._hovercard=o;p=babelHelpers.inherits(s,c('OGHovercardLayerHideOnBlur'));q=p&&p.prototype;function s(t){'use strict';q.constructor.call(this,t);}s.prototype.$conditionalHideOnBlur1=function(event){'use strict';var t=event.getTarget();for(var u=0,v=r.$conditionalHideOnBlur2.length;u<v;u++)if(c('DOM').contains(r.$conditionalHideOnBlur2[u],t))return false;return true;};this._hovercard.setPosition(this._position).setAlignment('center').enableBehaviors([s,c('LayerHideOnEscape')]);this._hovercard.subscribe('aftershow',this._onHovercardShow.bind(this));this._hovercard.subscribe('hide',this._onHovercardHide.bind(this));this._hovercard.subscribe('destroy',this._onHovercardDestroy.bind(this));if(this._hovercardScheduled)this.showHovercard(this._triggerClass,this._context);},showHovercard:function n(o,p){c('CSS').addClass(this._target,this._shownClass);if(this._triggerClass&&this._triggerClass!==o)c('CSS').removeClass(this._target,this._triggerClass);this._triggerClass=o;this._triggerClass&&c('CSS').addClass(this._target,this._triggerClass);this._context=p;if(this._hovercard){this._hovercard.setContext(p||this._target).show();this._hovercardShown=true;this._hovercardScheduled=false;this._hidePlaceholder();}else{this._hovercardScheduled=true;this._fetch();this._showPlaceholder();}this.inform('showhovercard');},hideHovercard:function n(){this._hovercardScheduled=false;this._hidePlaceholder();if(this._hovercard){this._hovercard.hide();}else this._onHovercardHide();},_showPlaceholder:function n(){if(!this._placeholder){this._placeholder=l(this._dialogClass);this._placeholder.setContext(this._context||this._target).setPosition(this._position).setAlignment('center').show();this._placeholderListener=this._placeholder.subscribe('hide',this._onPlaceholderHide.bind(this));}},_hidePlaceholder:function n(){this._placeholder&&this._placeholder.hide();},_onPlaceholderHide:function n(){if(this._placeholder){this._hovercardScheduled=false;this._placeholderListener&&this._placeholder.unsubscribe(this._placeholderListener);this._placeholder=null;!this._hovercardShown&&this._removeTriggerClasses();}},_onHovercardShow:function n(){var o=this._hovercard.getContent(),p=c('DOM').scry(o,'textarea.mentionsTextarea')[0];p&&p.focus();},_onHovercardHide:function n(){this._hovercardShown=false;this._removeTriggerClasses();this.inform('hidehovercard');},_onHovercardDestroy:function n(){this._hovercard=null;},_removeTriggerClasses:function n(){c('CSS').removeClass(this._target,this._shownClass);this._triggerClass&&c('CSS').removeClass(this._target,this._triggerClass);}});f.exports=m;}),null);
__d('PhotoMultiPhotosThumb',['Event','Style'],(function a(b,c,d,e,f,g){var h=1200,i={init:function j(k,l){var m=null,n=0;function o(q){n=q;l.forEach(function(r,s){c('Style').set(r,'opacity',s===q?1:0);});}function p(){o((n+1)%l.length);m=setTimeout(p,h);}c('Event').listen(k,'mouseenter',function(){if(m)return;n=0;p();});c('Event').listen(k,'mouseleave',function(){o(0);window.clearTimeout(m);m=null;});}};f.exports=i;}),null);
__d('BulkTagLoader',['AsyncRequest','emptyFunction'],(function a(b,c,d,e,f,g){var h=false;function i(){}Object.assign(i,{loadForSet:function j(k){if(!h){h=true;new (c('AsyncRequest'))('/ajax/photos/sets/tags_fetch.php').setHandler(c('emptyFunction')).setData({set:k}).send();}},loadForAlbum:function j(k){if(!h){h=true;new (c('AsyncRequest'))('/ajax/photos/album/tags_fetch.php').setHandler(c('emptyFunction')).setData({fbid:k}).send();}},reset:function j(){h=false;}});f.exports=i;}),null);
__d('PhotoCurationControl',['Event','Parent','Toggler'],(function a(b,c,d,e,f,g){var h={init:function i(j){var k=c('Parent').byClass(j,'fbPhotoStarGridElement');c('Event').listen(k,'mouseleave',function(){c('Toggler').hide();});}};f.exports=h;}),null);
__d('PhotoInlineActions',['csx','cx','Arbiter','AsyncRequest','CSS','Event','Nectar','Parent'],(function a(b,c,d,e,f,g,h,i){var j={init:function k(l,m,n,o,p,q,r,s,t,u){var v=false;c('Arbiter').subscribe(['UFI/CommentAddedActive','UFI/CommentDeletedActive','UFI/LikeActive'],function(w,x){if(parseInt(l.getAttribute('data-fbid'),10)!==x)return;if(w==='UFI/LikeActive')c('CSS').toggleClass(l,"_53a");new (c('AsyncRequest'))().setURI('/ajax/photos/photo/refresh.php').setData({fbid:l.getAttribute('data-fbid')}).setRelativeTo(l).send();});c('Event').listen(l,'click',function(event){var w=event.getTarget();if(v||!c('Parent').bySelector(w,"._53b"))return;event.prevent();c('CSS').toggleClass(l,"_53a");var x={};c('Nectar').addModuleData(x,l);v=new (c('AsyncRequest'))().setURI('/ajax/photos/photo/like.php').setData(babelHelpers['extends']({fbid:l.getAttribute('data-fbid'),relatedid:m,hovercardendpoint:n,includecommentlink:o,hovercardposition:p,includeleadingseparator:q,dialogClass:r,fetchOnHover:s,includeSocialContext:t,tagURI:u},x)).setRelativeTo(l).setErrorHandler(function(){c('CSS').toggleClass(l,"_53a");}).setFinallyHandler(function(){v=false;}).send();});}};f.exports=j;}),null);
__d('StarGridLayout',['Vector','removeFromArray'],(function a(b,c,d,e,f,g){function h(i){'use strict';Object.assign(this,i);}h.prototype.getShortestColumn=function(i){'use strict';return i[0]<=i[1]?0:1;};h.prototype.getDangling=function(i){'use strict';var j=i.filter(function(k){return !this.isStarred(k);}.bind(this));if(j.length%2===1)return j[j.length-1];return null;};h.prototype.mangleOrder=function(i){'use strict';if(i.length<3||!(this.isFixed(i[0])&&this.isStarred(i[1])))return i;var j=this.nextNonStarred(i,2);if(!j)return i;var k=i.concat();c('removeFromArray')(k,j);k.splice(1,0,j);return k;};h.prototype.layout=function(i){'use strict';var j=[0,0],k=0,l=this.getDangling(i),m=[];i=this.mangleOrder(i);for(var n=0;n<i.length;++n){var o=this.getShortestColumn(j),p=i[n];if(this.isStarred(p)){this.renderStarred(this._grid,j,o,p);j[o]+=2;k=Math.max(k,o*2+2);}else{m.push(p);if(m.length===2||p===l){this.renderNonStarred(this._grid,j,o,m);k=Math.max(k,o*2+m.length);m=[];j[o]+=1;}}}return new (c('Vector'))(k,Math.max.apply(null,j));};h.prototype.inNonStarredBlock=function(i,j,k,l){'use strict';return j===k[l]&&Math.floor(i/2)===l;};h.prototype.inStarredBlock=function(i,j,k,l){'use strict';return (j===k[l]||j===k[l]+1)&&Math.floor(i/2)===l;};h.prototype.nextNonStarred=function(i,j){'use strict';for(;j<i.length;++j)if(!this.isStarred(i[j]))return i[j];return null;};h.prototype.layoutReorder=function(i,j,k,l){'use strict';i=i.concat();k=Math.max(0,Math.min(3,k));l=Math.max(0,l);c('removeFromArray')(i,j);i.push(j);var m=[0,0],n=this.getDangling(i),o=false,p=[];for(var q=0;q<i.length;++q){var r=this.getShortestColumn(m),s=i[q];if(this.isStarred(s)){if(s===j)o=true;if(!o&&this.isStarred(j)&&this.inStarredBlock(k,l,m,r)&&this.inNonStarredBlock(k,l,m,r)){c('removeFromArray')(i,j);this.renderStarred(this._grid,m,r,j);m[r]+=2;r=this.getShortestColumn(m);o=true;}if(!o&&!this.isStarred(j)&&this.inStarredBlock(k,l,m,r)&&this.inNonStarredBlock(k,l,m,r)){c('removeFromArray')(i,j);if(p.length===1){p.splice(k%2,0,j);}else{var t=this.nextNonStarred(i,q);if(t){c('removeFromArray')(i,t);p.push(t);p.splice(k%2,0,j);}else p.push(j);}this.renderNonStarred(this._grid,m,r,p);p=[];m[r]+=1;n=this.getDangling(i.slice(q+1));r=this.getShortestColumn(m);o=true;}if(!o&&this.inStarredBlock(k,l,m,r)&&!this.inNonStarredBlock(k,l,m,r)){c('removeFromArray')(i,j);var t=this.nextNonStarred(i,q);i.push(j);if(t){c('removeFromArray')(i,t);i.splice(q,0,t);q--;continue;}l-=1;q--;continue;}this.renderStarred(this._grid,m,r,s);m[r]+=2;}else{p.push(s);if(p.length===2||s===n){if(!o&&!this.isStarred(j)&&this.inNonStarredBlock(k,l,m,r)){c('removeFromArray')(p,j);c('removeFromArray')(i,j);p.splice(k%2,0,j);if(p.length===3){c('removeFromArray')(i,p[2]);i.splice(q,0,p[2]);q=i.indexOf(p[2])-1;p.pop();}n=this.getDangling(i.slice(q+1));o=true;}if(!o&&this.isStarred(j)&&this.inNonStarredBlock(k,l,m,r)){c('removeFromArray')(i,j);this.renderStarred(this._grid,m,r,j);m[r]+=2;r=this.getShortestColumn(m);o=true;}this.renderNonStarred(this._grid,m,r,p);p=[];m[r]+=1;}}}};h.prototype.getStoringLayout=function(i){'use strict';return new h({grid:this._grid,isStarred:this.isStarred,isFixed:this.isFixed,renderStarred:function j(k,l,m,n){i.push(n);},renderNonStarred:function j(k,l,m,n){i.push(n[0]);if(n.length>1)i.push(n[1]);}});};h.prototype.reorder=function(i,j,k,l){'use strict';var m=[];this.getStoringLayout(m).layoutReorder(i,j,k,l);return m;};h.prototype.canonicalize=function(i){'use strict';var j=[];this.getStoringLayout(j).layout(i);return j;};f.exports=h;}),null);
__d('StarGrid',['Arbiter','CSS','DataStore','DOM','Locale','Parent','Style','StarGridLayout','removeFromArray'],(function a(b,c,d,e,f,g){var h={MARGIN:5,isStarred:function i(j){return c('CSS').hasClass(j,'fbPhotoStarGridStarred');},isFixed:function i(j){return c('CSS').hasClass(j,'fbPhotoStarGridFixed');},setPosition:function i(j,k,l){var m=c('Locale').isRTL()?'margin-right':'margin-left';c('Style').set(j,'position','absolute');c('Style').set(j,'margin-top',k+'px');c('Style').set(j,m,l+'px');},renderNonStarred:function i(j,k,l,m){for(var n=0;n<m.length;++n){var o=k[l]*h.getSize(j),p=(l*2+n)*h.getSize(j);h.setPosition(m[n],o,p);}},renderStarred:function i(j,k,l,m){var n=k[l]*h.getSize(j),o=l*2*h.getSize(j);h.setPosition(m,n,o);},mergeWithPreviousGrid:function i(j){var k=j.previousSibling;if(k&&c('CSS').hasClass(k,'fbStarGrid')){c('CSS').addClass(k,'fbStarGridAppendedTo');while(j.firstChild)k.appendChild(j.firstChild);c('DOM').remove(j);j=k;}return j;},addPhotos:function i(j){var k=c('DOM').scry(document.body,'.fbStarGrid')[0];if(!k)return;c('DOM').prependContent(k,j);var l=this.getSize(k);this.mergeAndLayoutGrid(k,l);},removeFromGrid:function i(j){var k=c('Parent').byClass(j,'fbStarGrid'),l=h.getElements(k);c('removeFromArray')(l,j);c('DOM').remove(j);h.layoutGrid(k,l);c('Arbiter').inform('StarGrid/UPDATE',k);},removePhoto:function i(j){var k=c('DOM').scry(document.body,'.fbPhotoStarGridElement[data-fbid="'+j+'"]')[0];this.removeFromGrid(k);},removeUntaggedPhoto:function i(j){var k=c('DOM').scry(document.body,'.fbPhotoStarGridElement[data-fbid="'+j+'"]'+'[data-in-photos-of="1"]');if(k.length>0)this.removeFromGrid(k[0]);},removePhotos:function i(j){var k,l;for(var m=0;m<j.length;m++){var n=j[m],o=c('DOM').scry(document.body,'.fbPhotoStarGridElement[data-fbid="'+n+'"]')[0];k=c('Parent').byClass(o,'fbStarGrid');l=h.getElements(k);c('removeFromArray')(l,o);c('DOM').remove(o);}h.layoutGrid(k,l);c('Arbiter').inform('StarGrid/UPDATE',k);},layoutGrid:function i(j,k){var l=new (c('StarGridLayout'))({_grid:j,isStarred:h.isStarred,isFixed:h.isFixed,renderNonStarred:h.renderNonStarred,renderStarred:h.renderStarred});h.setElements(j,k);var m=l.layout(k);c('Style').set(j,'width',m.x*h.getSize(j)+'px');c('Style').set(j,'height',m.y*h.getSize(j)+'px');},mergeAndLayoutGrid:function i(j,k){var l=c('DOM').scry(j,'.fbPhotoStarGridElement'),m=h.mergeWithPreviousGrid(j),n=l;if(j!==m)n=h.getElements(m).concat(l);h.setElements(j,n);c('DataStore').set(j,'size',k);h.layoutGrid(m,n);c('Arbiter').subscribe('PhotosBulkEditablePhoto.MOVED',function(o,p){h.removePhoto(p);}.bind(this));c('Arbiter').inform('StarGrid/UPDATE',j);},getSize:function i(j){return c('DataStore').get(j,'size');}};Object.assign(h,{getElements:function i(j){var k=c('DataStore').get(j,'elements');if(!k){k=c('DOM').scry(j,'div.fbPhotoStarGridElement');h.setElements(j,k);}return k;},setElements:function i(j,k){c('DataStore').set(j,'elements',k);}});f.exports=h;}),null);
__d('TagSuggestionsDrawer',['AsyncRequest','PhotosAppSection'],(function a(b,c,d,e,f,g){var h=false,i={init:function j(){if(h)return;h=true;c('PhotosAppSection').subscribe('toggle_drawer',i._onToggle);},_onToggle:function j(k,l){if(l.button_clicked=='show'){i._notify(false);}else i._notify(true);},_notify:function j(k){new (c('AsyncRequest'))('/ajax/medley/tag_suggestions_drawer.php').setData({is_closed:k}).send();}};f.exports=i;}),null);