if (self.CavalryLogger) { CavalryLogger.start_js(["E\/dNZ"]); }

__d("VideoProjection",[],(function a(b,c,d,e,f,g){f.exports={FLAT:"flat",EQUIRECTANGULAR:"equirectangular",CUBEMAP:"cubemap",UNPADDED_CUBEMAP:"unpadded_cubemap",UNPADDED_CUBESTRIP:"unpadded_cubestrip",OFFSET_CUBEMAP:"offset_cubemap",ROTATED_CUBEMAP:"rotated_cubemap",PYRAMID:"pyramid",STRETCHED_CUBEMAP:"stretched_cubemap"};}),null);
__d('degToRad',[],(function a(b,c,d,e,f,g){'use strict';function h(i){return i*Math.PI/180;}f.exports=h;}),null);
__d('radToDeg',[],(function a(b,c,d,e,f,g){'use strict';function h(i){return i*180/Math.PI;}f.exports=h;}),null);
__d('SphericalViewportControl',['cx','CSS','DOMQuery','Event','EventEmitter','Keys','SubscriptionsHandler','UserAgent','VelocityTracker','debounce','getElementRect','performanceNow','requestAnimationFrame','throttle','degToRad','radToDeg','queryThenMutateDOM'],(function a(b,c,d,e,f,g,h){var i,j,k=c('DOMQuery').scry(window.document.body,"_li")[0]||window.document.body,l=2.5,m=20,n=110,o=179,p=.01,q=1000,r=.5,s=['W','A','S','D'].reduce(function(v,w){v[w]=w.charCodeAt(0);return v;},{}),t={Up:"__tu",Down:"__tz",Left:"_2a6u",Right:"_2a6v",UpLeft:"__t-",UpRight:"__u0",DownLeft:"__u1",DownRight:"__u3"};i=babelHelpers.inherits(u,c('EventEmitter'));j=i&&i.prototype;function u(v,w){var x=arguments.length<=2||arguments[2]===undefined?{}:arguments[2],y=arguments.length<=3||arguments[3]===undefined?k:arguments[3];'use strict';j.constructor.call(this);this.$SphericalViewportControl94=c('throttle')(function(z){this.emit('wheelScroll',z);if(!this.$SphericalViewportControl36)return;var aa=(z.deltaX||0)+(z.deltaY||0)+(z.deltaZ||0),ba=aa/120*45/10;this.$SphericalViewportControl71(ba);}.bind(this),30);this.$SphericalViewportControl97=function(){var z=c('performanceNow')(),aa=(z-this.$SphericalViewportControl47)/1000;this.$SphericalViewportControl47=z;this.$SphericalViewportControl98();if(!this.$SphericalViewportControl48)c('queryThenMutateDOM')(this.$SphericalViewportControl64.bind(this),function(){return null;});var ba=this.$SphericalViewportControl81(),ca=false;if(this.$SphericalViewportControl32&&this.$SphericalViewportControl42&&this.$SphericalViewportControl37&&!this.$SphericalViewportControl12&&!this.$SphericalViewportControl13){var da=this.$SphericalViewportControl99()*aa;ba.x+=da;var ea=this.$SphericalViewportControl100()*aa;ba.y+=ea;if(da||ea)ca=true;}ba.x+=this.$SphericalViewportControl2.getVelocityX()*aa;ba.y+=this.$SphericalViewportControl2.getVelocityY()*aa;ba.x+=this.$SphericalViewportControl3.getVelocityX()*aa;ba.y+=this.$SphericalViewportControl3.getVelocityY()*aa;this.$SphericalViewportControl101(ba.x,ba.y);var fa=this.$SphericalViewportControl2.getSpeed()>0||this.$SphericalViewportControl3.getSpeed()>0;if(this.$SphericalViewportControl12||this.$SphericalViewportControl11||this.$SphericalViewportControl13||this.$SphericalViewportControl45||this.$SphericalViewportControl35||fa||ca){c('requestAnimationFrame')(this.$SphericalViewportControl97);}else{this.$SphericalViewportControl8=false;this.emit('updateViewportEnd',this.$SphericalViewportControl19.x,this.$SphericalViewportControl19.y);}}.bind(this);this.$SphericalViewportControl2=new (c('VelocityTracker'))(300);this.$SphericalViewportControl3=new (c('VelocityTracker'))(300);this.$SphericalViewportControl6=new (c('SubscriptionsHandler'))();this.$SphericalViewportControl24=v;this.$SphericalViewportControl4=y;this.$SphericalViewportControl41=m;this.$SphericalViewportControl49(w);this.$SphericalViewportControl14={x:0,y:0};this.$SphericalViewportControl47=0;this.$SphericalViewportControl10={left:0,right:0,up:0,down:0};this.$SphericalViewportControl16={x:0,y:0};this.$SphericalViewportControl17={x:0,y:0};this.$SphericalViewportControl18=new (c('VelocityTracker'))();this.$SphericalViewportControl23=new (c('SubscriptionsHandler'))();this.$SphericalViewportControl30=false;this.$SphericalViewportControl15=false;this.$SphericalViewportControl20=false;this.$SphericalViewportControl33=x.enableGyro||false;this.$SphericalViewportControl34=x.slipFactor||0;this.$SphericalViewportControl37=x.springFactor||0;this.$SphericalViewportControl38=x.maxSpringDegrees||15;this.$SphericalViewportControl39=x.maxStretchXDegrees||20;this.$SphericalViewportControl40=x.maxStretchYDegrees||20;this.$SphericalViewportControl43=x.rubberBandConstant||0;this.$SphericalViewportControl42=x.enableRubberBanding||false;this.$SphericalViewportControl45=false;this.$SphericalViewportControl46=0;this.$SphericalViewportControl44=c('debounce')(function(){return this.emit('zoomStart');}.bind(this),q);this.$SphericalViewportControl29=this.$SphericalViewportControl50();this.$SphericalViewportControl48=x.disableAutoClientSizeUpdate||false;this.$SphericalViewportControl51();}u.prototype.destroy=function(){'use strict';this.removeAllListeners();this.getSubscriptions().remove();};u.prototype.$SphericalViewportControl51=function(){'use strict';this.$SphericalViewportControl23.addSubscriptions(c('Event').listen(this.$SphericalViewportControl24,'mousedown',function(v){return this.$SphericalViewportControl52(v);}.bind(this)),c('Event').listen(this.$SphericalViewportControl24,'mouseenter',function(v){return this.$SphericalViewportControl53(v);}.bind(this)),c('Event').listen(this.$SphericalViewportControl24,'mouseleave',function(v){return this.$SphericalViewportControl54(v);}.bind(this)),c('Event').listen(this.$SphericalViewportControl24,'click',function(v){return this.$SphericalViewportControl55(v);}.bind(this)),c('Event').listen(this.$SphericalViewportControl24,'wheel',function(v){return this.$SphericalViewportControl56(v);}.bind(this)),c('Event').listen(this.$SphericalViewportControl24,'keydown',function(v){return this.$SphericalViewportControl57(v);}.bind(this)),c('Event').listen(this.$SphericalViewportControl24,'keyup',function(v){return this.$SphericalViewportControl58(v);}.bind(this)),c('Event').listen(this.$SphericalViewportControl24,'blur',function(v){return this.$SphericalViewportControl59(v);}.bind(this)),c('Event').listen(this.$SphericalViewportControl24,'touchstart',function(v){return this.$SphericalViewportControl60(v);}.bind(this)),c('Event').listen(this.$SphericalViewportControl24,'touchmove',function(v){return this.$SphericalViewportControl61(v);}.bind(this)),c('Event').listen(this.$SphericalViewportControl24,'touchend',function(v){return this.$SphericalViewportControl62(v);}.bind(this)),c('Event').listen(this.$SphericalViewportControl24,'touchcancel',function(v){return this.$SphericalViewportControl62(v);}.bind(this)));if(this.$SphericalViewportControl33)this.$SphericalViewportControl23.addSubscriptions(c('Event').listen(this.$SphericalViewportControl24,'mousemove',function(v){return this.$SphericalViewportControl63(v);}.bind(this)));};u.prototype.$SphericalViewportControl49=function(v){'use strict';this.$SphericalViewportControl64();this.$SphericalViewportControl1=this.$SphericalViewportControl26/this.$SphericalViewportControl27;var w=v.fieldOfView;this.$SphericalViewportControl36=Boolean(v.enableZoom);this.$SphericalViewportControl22=(v.panningVelocityFactor||0)/15*80||80;this.$SphericalViewportControl9=(v.keyboardVelocityFactor||0)*1000||80;if(v.partialLimits){this.$SphericalViewportControl31={left:v.partialLimits.partialLeftDegrees,right:v.partialLimits.partialRightDegrees,up:v.partialLimits.partialTopDegrees,down:v.partialLimits.partialBottomDegrees};this.$SphericalViewportControl32=true;}else{this.$SphericalViewportControl32=false;this.$SphericalViewportControl31={up:null,down:null,left:null,right:null};}this.$SphericalViewportControl21={x:v.initialHeading,y:v.initialPitch};var x=this.$SphericalViewportControl31,y=x.up,z=x.down;if((y||y===0)&&(z||z===0)){var aa=y,ba=z,ca=aa+ba;if(w>ca){w=ca;this.$SphericalViewportControl21.y=(aa-ba)/2;}}this.$SphericalViewportControl5=this.$SphericalViewportControl65(w);this.$SphericalViewportControl19={x:this.$SphericalViewportControl21.x,y:this.$SphericalViewportControl21.y};};u.prototype.reconfigure=function(v){'use strict';this.$SphericalViewportControl49(v);};u.prototype.setEnableGyro=function(v){'use strict';this.$SphericalViewportControl33=v;};u.prototype.$SphericalViewportControl52=function(v){'use strict';if(this.$SphericalViewportControl13)this.$SphericalViewportControl66();this.$SphericalViewportControl12=true;this.$SphericalViewportControl67(v);};u.prototype.$SphericalViewportControl60=function(v){'use strict';if(this.$SphericalViewportControl12)this.$SphericalViewportControl66();if(this.$SphericalViewportControl13){this.$SphericalViewportControl68(v);this.$SphericalViewportControl13=false;this.$SphericalViewportControl66();}else this.$SphericalViewportControl13=true;this.$SphericalViewportControl67(v);};u.prototype.$SphericalViewportControl68=function(v){'use strict';if(v.touches.length===2&&this.$SphericalViewportControl36){this.$SphericalViewportControl45=true;this.$SphericalViewportControl46=this.$SphericalViewportControl69(v);}};u.prototype.$SphericalViewportControl61=function(v){'use strict';if(this.$SphericalViewportControl45){this.$SphericalViewportControl70(v);if(this.$SphericalViewportControl36)c('Event').kill(v);}};u.prototype.$SphericalViewportControl70=function(v){'use strict';var w=this.$SphericalViewportControl69(v),x=this.$SphericalViewportControl5*(this.$SphericalViewportControl46/w),y=x-this.$SphericalViewportControl5;this.$SphericalViewportControl71(y);this.$SphericalViewportControl46=w;};u.prototype.$SphericalViewportControl69=function(v){'use strict';var w=v.touches[0].pageX-v.touches[1].pageX,x=v.touches[0].pageY-v.touches[1].pageY;return Math.sqrt(Math.pow(w,2)+Math.pow(x,2));};u.prototype.$SphericalViewportControl62=function(v){'use strict';if(this.$SphericalViewportControl45){this.$SphericalViewportControl45=false;}else if(this.$SphericalViewportControl13)this.$SphericalViewportControl54(v);};u.prototype.$SphericalViewportControl67=function(v){'use strict';this.$SphericalViewportControl72();this.$SphericalViewportControl73(v);this.$SphericalViewportControl74(v);this.$SphericalViewportControl75();v.preventDefault();};u.prototype.$SphericalViewportControl54=function(v){'use strict';if(this.$SphericalViewportControl35&&!this.$SphericalViewportControl12){this.$SphericalViewportControl76();this.$SphericalViewportControl35=false;}};u.prototype.$SphericalViewportControl77=function(v){'use strict';if(this.$SphericalViewportControl13||this.$SphericalViewportControl12)this.$SphericalViewportControl66();};u.prototype.$SphericalViewportControl78=function(v){'use strict';this.$SphericalViewportControl74(v);this.$SphericalViewportControl7=true;this.emit('updateViewportMove');};u.prototype.$SphericalViewportControl63=function(v){'use strict';if(this.$SphericalViewportControl35){this.$SphericalViewportControl79(v);this.emit('updateViewportMove');}};u.prototype.$SphericalViewportControl72=function(){'use strict';this.$SphericalViewportControl35=false;this.$SphericalViewportControl33=false;};u.prototype.$SphericalViewportControl80=function(v){'use strict';this.$SphericalViewportControl74(v);this.$SphericalViewportControl81();this.$SphericalViewportControl66();this.$SphericalViewportControl76();v.preventDefault();};u.prototype.$SphericalViewportControl66=function(v){'use strict';c('queryThenMutateDOM')(function(){},function(){return this.$SphericalViewportControl24.style.cursor='';}.bind(this));this.$SphericalViewportControl13=false;this.$SphericalViewportControl12=false;this.$SphericalViewportControl6.release();if(this.$SphericalViewportControl28){c('CSS').removeClass(this.$SphericalViewportControl4,this.$SphericalViewportControl28);this.$SphericalViewportControl28='';}};u.prototype.$SphericalViewportControl82=function(v){'use strict';if(this.$SphericalViewportControl13&&v.changedTouches){return v.changedTouches[0];}else if(this.$SphericalViewportControl12){return v;}else if(this.$SphericalViewportControl35)return v;return null;};u.prototype.$SphericalViewportControl83=function(v){'use strict';var w=this.$SphericalViewportControl82(v);if(!w)return this.$SphericalViewportControl16;return {x:w.screenX,y:w.screenY};};u.prototype.$SphericalViewportControl84=function(v){'use strict';var w=this.$SphericalViewportControl82(v);if(!w)return this.$SphericalViewportControl17;return {x:w.clientX,y:w.clientY};};u.prototype.$SphericalViewportControl73=function(v){'use strict';this.$SphericalViewportControl16=this.$SphericalViewportControl83(v);this.$SphericalViewportControl14={x:0,y:0};this.$SphericalViewportControl18=new (c('VelocityTracker'))();this.$SphericalViewportControl3=new (c('VelocityTracker'))(300);c('queryThenMutateDOM')(function(){},function(){return this.$SphericalViewportControl24.style.cursor=this.$SphericalViewportControl29;}.bind(this));this.$SphericalViewportControl6.engage();var w=this.$SphericalViewportControl4;if(this.$SphericalViewportControl13){this.$SphericalViewportControl6.addSubscriptions(c('Event').listen(w,'touchmove',function(x){return this.$SphericalViewportControl78(x);}.bind(this)),c('Event').listen(w,'touchend',function(x){return this.$SphericalViewportControl80(x);}.bind(this)),c('Event').listen(w,'touchcancel',function(x){return this.$SphericalViewportControl77(x);}.bind(this)));}else this.$SphericalViewportControl6.addSubscriptions(c('Event').listen(w,'mousemove',function(x){return this.$SphericalViewportControl78(x);}.bind(this)),c('Event').listen(w,'mouseup',function(x){return this.$SphericalViewportControl80(x);}.bind(this)),c('Event').listen(w,'mouseleave',function(x){return this.$SphericalViewportControl77(x);}.bind(this)));};u.prototype.$SphericalViewportControl79=function(v){'use strict';this.$SphericalViewportControl85(v,this.$SphericalViewportControl34);};u.prototype.$SphericalViewportControl74=function(v){'use strict';this.$SphericalViewportControl85(v,1);};u.prototype.$SphericalViewportControl85=function(v,w){'use strict';var x=this.$SphericalViewportControl83(v),y=this.$SphericalViewportControl15?{x:0,y:0}:this.$SphericalViewportControl14;this.$SphericalViewportControl14={x:w*(x.x-this.$SphericalViewportControl16.x)+y.x,y:w*(x.y-this.$SphericalViewportControl16.y)+y.y};this.$SphericalViewportControl15=false;this.$SphericalViewportControl16=x;this.$SphericalViewportControl18.update(x.x,x.y);this.$SphericalViewportControl17=this.$SphericalViewportControl84(v);};u.prototype.$SphericalViewportControl86=function(){'use strict';var v=this.$SphericalViewportControl87(),w=-this.$SphericalViewportControl18.getVelocityX()*v,x=this.$SphericalViewportControl18.getVelocityY()*v,y=this.$SphericalViewportControl35?this.$SphericalViewportControl34:1;if(this.$SphericalViewportControl88())w=-w;return {x:w*y,y:x*y};};u.prototype.$SphericalViewportControl89=function(v,w){'use strict';return c('radToDeg')(Math.atan(v/w));};u.prototype.$SphericalViewportControl90=function(v,w,x){'use strict';return {x:this.$SphericalViewportControl89(v.x-this.$SphericalViewportControl26/2,x),y:-this.$SphericalViewportControl89(v.y-this.$SphericalViewportControl27/2,w)};};u.prototype.$SphericalViewportControl91=function(v,w){'use strict';var x={x:v.x-w.x,y:v.y-w.y},y=this.$SphericalViewportControl27/(2*Math.tan(c('degToRad')(this.getVerticalFieldOfView()/2))),z=y*Math.cos(c('degToRad')(this.$SphericalViewportControl19.y)),aa=z-(this.$SphericalViewportControl27/2-v.y)*Math.sin(c('degToRad')(this.$SphericalViewportControl19.y));if(this.$SphericalViewportControl19.y==-90&&w.y<0||this.$SphericalViewportControl19.y==90&&w.y>0){var ba=this.$SphericalViewportControl89(x.y-this.$SphericalViewportControl27/2,x.x-this.$SphericalViewportControl26/2),ca=this.$SphericalViewportControl89(v.y-this.$SphericalViewportControl27/2,v.x-this.$SphericalViewportControl26/2),da=ca-ba;if(da>90){da=180-da;}else if(da<-90)da=180+da;return {x:da*Math.sign(this.$SphericalViewportControl19.y),y:0};}else{var ea=this.$SphericalViewportControl90(x,y,aa),fa=this.$SphericalViewportControl90(v,y,aa);return {x:ea.x-fa.x,y:ea.y-fa.y};}};u.prototype.$SphericalViewportControl88=function(){'use strict';var v=this.$SphericalViewportControl25?this.$SphericalViewportControl25.top:c('getElementRect')(this.$SphericalViewportControl24).top,w=this.$SphericalViewportControl17.y-v,x=this.$SphericalViewportControl27/(2*Math.tan(c('degToRad')(this.getVerticalFieldOfView()/2))),y=-x/Math.tan(c('degToRad')(this.$SphericalViewportControl19.y))+this.$SphericalViewportControl27/2,z=w>y&&this.$SphericalViewportControl19.y<0||w<y&&this.$SphericalViewportControl19.y>0;return z;};u.prototype.$SphericalViewportControl81=function(){'use strict';var v={x:0,y:0};if(!this.$SphericalViewportControl15){this.$SphericalViewportControl15=true;var w=this.$SphericalViewportControl25,x=this.$SphericalViewportControl17.x<w.left,y=this.$SphericalViewportControl17.x>w.right,z=this.$SphericalViewportControl17.y<w.top,aa=this.$SphericalViewportControl17.y>w.bottom;this.$SphericalViewportControl92(x,y,z,aa);var ba={x:this.$SphericalViewportControl17.x-w.left,y:this.$SphericalViewportControl17.y-w.top};if(!x&&!y){v.x=this.$SphericalViewportControl91(ba,this.$SphericalViewportControl14).x;}else v.x=-this.$SphericalViewportControl14.x*this.$SphericalViewportControl87()*r;if(!z&&!aa){v.y=this.$SphericalViewportControl91(ba,this.$SphericalViewportControl14).y;}else v.y=this.$SphericalViewportControl14.y*this.$SphericalViewportControl87()*r;}this.$SphericalViewportControl3.updateVelocity(0,0);return this.$SphericalViewportControl93(v);};u.prototype.$SphericalViewportControl93=function(v){'use strict';if(!this.$SphericalViewportControl42)return v;if(!this.$SphericalViewportControl32)return v;var w=this.$SphericalViewportControl19,x=w.x,y=w.y,z=v.x,aa=v.y,ba=x+z,ca=y+aa,da=this.$SphericalViewportControl31,ea=da.left,fa=da.right,ga=da.up,ha=da.down,ia=this.getVerticalFieldOfView(),ja=this.getHorizontalFieldOfView(),ka=ea!=null?ba>360-ea+ja/2:true,la=fa!=null?ba<fa-ja/2:true,ma=ga!=null?ca<ga-ia/2:true,na=ha!=null?ca>-ha+ia/2:true;if(!ka&&!la)z*=this.$SphericalViewportControl43;if(!ma||!na)aa*=this.$SphericalViewportControl43;return {x:z,y:aa};};u.prototype.$SphericalViewportControl53=function(v){'use strict';this.emit('mouseEnter');if(this.$SphericalViewportControl12){this.$SphericalViewportControl3=new (c('VelocityTracker'))(300);}else if(this.$SphericalViewportControl33&&this.$SphericalViewportControl34){this.$SphericalViewportControl3=new (c('VelocityTracker'))(300);this.$SphericalViewportControl35=true;this.$SphericalViewportControl16=this.$SphericalViewportControl83(v);this.$SphericalViewportControl14={x:0,y:0};this.$SphericalViewportControl75();}};u.prototype.$SphericalViewportControl55=function(v){'use strict';this.$SphericalViewportControl24.focus();if(!this.$SphericalViewportControl7)this.emit('DOM/click',v);this.$SphericalViewportControl7=false;return false;};u.prototype.$SphericalViewportControl56=function(v){'use strict';if(this.$SphericalViewportControl30)v.preventDefault();this.$SphericalViewportControl94(v);if(this.$SphericalViewportControl36)c('Event').kill(v);};u.prototype.$SphericalViewportControl71=function(v){'use strict';var w=this.setFieldOfView(this.$SphericalViewportControl5+v);if(w)this.$SphericalViewportControl44();};u.prototype.disableKeyboard=function(){'use strict';this.$SphericalViewportControl20=true;};u.prototype.enableKeyboard=function(){'use strict';this.$SphericalViewportControl20=false;};u.prototype.$SphericalViewportControl57=function(v){'use strict';var w=this.$SphericalViewportControl95(v);if(w&&!this.$SphericalViewportControl20){this.$SphericalViewportControl10[w]=1;if(!this.$SphericalViewportControl11){this.$SphericalViewportControl11=true;this.$SphericalViewportControl72();this.$SphericalViewportControl75();this.emit('updateViewportMove');}return false;}return true;};u.prototype.$SphericalViewportControl58=function(v){'use strict';var w=this.$SphericalViewportControl95(v);if(w&&!this.$SphericalViewportControl20){this.$SphericalViewportControl10[w]=0;var x=false;for(var y in this.$SphericalViewportControl10)if(this.$SphericalViewportControl10.hasOwnProperty(y)&&this.$SphericalViewportControl10[y]>0){x=true;break;}this.$SphericalViewportControl11=x;return false;}return true;};u.prototype.$SphericalViewportControl76=function(){'use strict';var v=this.$SphericalViewportControl86();this.$SphericalViewportControl3=new (c('VelocityTracker'))(300,v);};u.prototype.$SphericalViewportControl75=function(){var v,w=this;'use strict';if(!this.$SphericalViewportControl8)(function(){if(w.$SphericalViewportControl48)w.$SphericalViewportControl96();w.$SphericalViewportControl8=true;w.$SphericalViewportControl2.updateVelocity(0,0);w.emit('updateViewportBegin');var x=w.once('updateViewportMove',function(){return this.emit('updateViewportMoveStart',this.$SphericalViewportControl35);}.bind(w));w.once('updateViewportEnd',function(){return x.remove();});w.$SphericalViewportControl47=c('performanceNow')();c('requestAnimationFrame')(w.$SphericalViewportControl97);})();};u.prototype.$SphericalViewportControl96=function(){'use strict';this.$SphericalViewportControl25=c('getElementRect')(this.$SphericalViewportControl24);};u.prototype.updateViewportClientSize=function(v){'use strict';this.$SphericalViewportControl26=v.width;this.$SphericalViewportControl27=v.height;};u.prototype.updateMinVFOV=function(v){'use strict';this.$SphericalViewportControl41=Math.max(l,Math.min(m,v));};u.prototype.$SphericalViewportControl64=function(){'use strict';this.$SphericalViewportControl25=c('getElementRect')(this.$SphericalViewportControl24);this.$SphericalViewportControl26=this.$SphericalViewportControl24.clientWidth||1;this.$SphericalViewportControl27=this.$SphericalViewportControl24.clientHeight||1;};u.prototype.$SphericalViewportControl99=function(){'use strict';var v=180,w=0,x=this.$SphericalViewportControl31,y=x.left,z=x.right,aa=this.getHorizontalFieldOfView();if(y!=null&&z!=null)v=(z-y)/2+180;if(y!=null&&this.$SphericalViewportControl19.x>=v){var ba=360-y+aa/2-this.$SphericalViewportControl19.x;if(ba>0)w=Math.min(ba,this.$SphericalViewportControl38)*this.$SphericalViewportControl37;}if(z!=null&&this.$SphericalViewportControl19.x<=v){var ca=z-aa/2-this.$SphericalViewportControl19.x;if(ca<0)w=Math.max(ca,-this.$SphericalViewportControl38)*this.$SphericalViewportControl37;}return Math.abs(w)<p?0:w;};u.prototype.$SphericalViewportControl100=function(){'use strict';var v=0,w=this.$SphericalViewportControl31,x=w.up,y=w.down,z=this.getVerticalFieldOfView();if(x!=null){var aa=x-z/2-this.$SphericalViewportControl19.y;if(aa<0)v=Math.max(aa,-this.$SphericalViewportControl38)*this.$SphericalViewportControl37;}if(y!=null){var ba=-y+z/2-this.$SphericalViewportControl19.y;if(ba>0)v=Math.min(ba,this.$SphericalViewportControl38)*this.$SphericalViewportControl37;}return Math.abs(v)<p?0:v;};u.prototype.$SphericalViewportControl92=function(v,w,x,y){'use strict';var z='';if(v||w||x||y){var aa=v?'Left':w?'Right':'',ba=x?'Up':y?'Down':'';z=t[ba+aa];}if(this.$SphericalViewportControl28!=z){if(this.$SphericalViewportControl28){c('CSS').removeClass(this.$SphericalViewportControl4,this.$SphericalViewportControl28);this.$SphericalViewportControl28='';}if(z){this.$SphericalViewportControl28=z;c('CSS').addClass(this.$SphericalViewportControl4,z);}}};u.prototype.getSubscriptions=function(){'use strict';return {remove:function(){this.$SphericalViewportControl23.release();this.$SphericalViewportControl6.release();}.bind(this)};};u.prototype.$SphericalViewportControl59=function(v){'use strict';for(var w in this.$SphericalViewportControl10)this.$SphericalViewportControl10[w]=0;this.$SphericalViewportControl11=false;};u.prototype.getOrientation=function(){'use strict';return this.$SphericalViewportControl19;};u.prototype.$SphericalViewportControl102=function(v,w){'use strict';var x=(v+360)%360,y=Math.max(-90,Math.min(90,w));if(!this.$SphericalViewportControl32)return {x:x,y:y};var z=this.$SphericalViewportControl31,aa=z.left,ba=z.right,ca=z.up,da=z.down,ea=this.getVerticalFieldOfView(),fa=this.getHorizontalFieldOfView(),ga=0,ha=0;if(this.$SphericalViewportControl42){ga=this.$SphericalViewportControl39;ha=this.$SphericalViewportControl40;}if(aa!=null)x=x<=180?x:Math.max(x,360-aa+fa/2-ga);if(ba!=null)x=x>=180?x:Math.min(x,ba-fa/2+ga);if(ca!=null)y=Math.min(y,ca-ea/2+ha);if(da!=null)y=Math.max(y,-da+ea/2-ha);return {x:x,y:y};};u.prototype.setSphericalOrientation=function(v,w){'use strict';var x=this.$SphericalViewportControl102(v,w),y=x.x,z=x.y,aa=!Number.isNaN(y+z)&&(y!==this.$SphericalViewportControl19.x||z!==this.$SphericalViewportControl19.y);if(aa){this.$SphericalViewportControl19={x:y,y:z};this.emit('viewportChange',y,z,this.$SphericalViewportControl5);}};u.prototype.setRelativeSphericalOrientation=function(v,w){'use strict';this.setSphericalOrientation(v+this.$SphericalViewportControl21.x,w+this.$SphericalViewportControl21.y);};u.prototype.$SphericalViewportControl101=function(v,w){'use strict';this.setSphericalOrientation(this.$SphericalViewportControl19.x+v,this.$SphericalViewportControl19.y+w);};u.prototype.$SphericalViewportControl65=function(v){'use strict';var w=Math.min(o/this.getAspectRatio(),n);if(this.$SphericalViewportControl32&&this.$SphericalViewportControl31){var x=this.$SphericalViewportControl31.up||this.$SphericalViewportControl31.up===0,y=this.$SphericalViewportControl31.down||this.$SphericalViewportControl31.down===0;if(x&&y){var z=this.$SphericalViewportControl31.up||0,aa=this.$SphericalViewportControl31.down||0;w=Math.min(w,z+aa);}}return Math.min(w,Math.max(this.$SphericalViewportControl41,v));};u.prototype.setFieldOfView=function(v){'use strict';var w=this.$SphericalViewportControl5,x=this.$SphericalViewportControl31.up||this.$SphericalViewportControl31.up===0,y=this.$SphericalViewportControl31.up||0,z=this.$SphericalViewportControl31.down||this.$SphericalViewportControl31.down===0,aa=this.$SphericalViewportControl31.down||0,ba=this.$SphericalViewportControl31.left||this.$SphericalViewportControl31.right,ca=this.$SphericalViewportControl31.left||0,da=this.$SphericalViewportControl31.right||0,ea=this.$SphericalViewportControl65(v),fa=ea*this.getAspectRatio(),ga=false,ha=this.$SphericalViewportControl19.x,ia=this.$SphericalViewportControl19.y;if(z&&ea/2-ia>aa){ia=ea/2-aa;ga=true;}if(x&&ia+ea/2>y){ia=y-ea/2;ga=true;}if(ba){var ja=((da-ca)/2+180)%360;if(ha>ja&&fa/2+360-ha>ca){ha=360+fa/2-ca;ga=true;}if(ha<ja&&ha+fa/2>da){ha=da-fa/2;ga=true;}}if(ga&&!Number.isNaN(ha+ia))this.$SphericalViewportControl19={x:ha,y:ia};if(!Number.isNaN(ea)&&w!==ea||ga){this.$SphericalViewportControl5=ea;this.emit('viewportChange',this.$SphericalViewportControl19.x,this.$SphericalViewportControl19.y,ea);return true;}return false;};u.prototype.getVerticalFieldOfView=function(){'use strict';return this.$SphericalViewportControl5;};u.prototype.getAspectRatio=function(){'use strict';if(this.$SphericalViewportControl24&&this.$SphericalViewportControl26&&this.$SphericalViewportControl27)return this.$SphericalViewportControl26/this.$SphericalViewportControl27;return this.$SphericalViewportControl1;};u.prototype.getHorizontalFieldOfView=function(){'use strict';return this.$SphericalViewportControl5*this.getAspectRatio();};u.prototype.setPreventScrollDefaultAction=function(v){'use strict';this.$SphericalViewportControl30=v;};u.prototype.updateViewport=function(v,w,x){'use strict';this.$SphericalViewportControl19={x:v,y:w};this.$SphericalViewportControl5=this.$SphericalViewportControl65(x);};u.prototype.isUpdating=function(){'use strict';return this.$SphericalViewportControl8;};u.prototype.$SphericalViewportControl98=function(){'use strict';var v=this.$SphericalViewportControl9*(this.$SphericalViewportControl10.right-this.$SphericalViewportControl10.left),w=this.$SphericalViewportControl9*(this.$SphericalViewportControl10.up-this.$SphericalViewportControl10.down);this.$SphericalViewportControl2.updateVelocity(v,w);};u.prototype.$SphericalViewportControl95=function(v){'use strict';var w=c('Event').getKeyCode(v),x=null;switch(w){case c('Keys').LEFT:case s.A:x='left';break;case c('Keys').UP:case s.W:x='up';break;case c('Keys').RIGHT:case s.D:x='right';break;case c('Keys').DOWN:case s.S:x='down';break;}return x;};u.prototype.$SphericalViewportControl87=function(){'use strict';return this.$SphericalViewportControl5/this.$SphericalViewportControl27;};u.prototype.$SphericalViewportControl50=function(){'use strict';var v='grabbing';if(c('UserAgent').isEngine('WebKit')){v='-webkit-'+v;}else if(c('UserAgent').isEngine('Gecko'))v='-moz-'+v;return v;};f.exports=u;}),null);
__d('SphericalMediaCanvasPool',['DOM','Map'],(function a(b,c,d,e,f,g){'use strict';var h=1,i='default',j=function l(m,n){return m+n;};function k(){this.$SphericalMediaCanvasPool1=new (c('Map'))();this.$SphericalMediaCanvasPool2=new (c('Map'))();}k.prototype.setLimit=function(l){var m=arguments.length<=1||arguments[1]===undefined?i:arguments[1],n=this.$SphericalMediaCanvasPool2.get(m)||{queue:[],limit:1};n.limit=l;this.$SphericalMediaCanvasPool2.set(m,n);};k.prototype.release=function(l){var m=arguments.length<=1||arguments[1]===undefined?i:arguments[1],n=j(l,m),o=this.$SphericalMediaCanvasPool1.get(n);if(!o)return false;var p=this.$SphericalMediaCanvasPool2.get(m);if(!p||p.queue.length===0)return false;p.queue.splice(p.queue.indexOf(n),1);o.canvas.parentNode&&o.canvas.parentNode.removeChild(o.canvas);return this.$SphericalMediaCanvasPool1['delete'](n);};k.prototype.get=function(l,m){var n=arguments.length<=2||arguments[2]===undefined?i:arguments[2],o=babelHelpers['extends']({},m.canvasAttrs);if(!l||!m.beforeCanvasLost)throw new Error('Missing required arguments.');var p=j(l,n);o['data-id']=o['data-id']||l;var q=this.$SphericalMediaCanvasPool1.get(p);if(q)return q.canvas;var r=this.$SphericalMediaCanvasPool2.get(n)||{queue:[],limit:h},s=void 0;if(r.queue.length<r.limit){s=c('DOM').create('canvas',o);}else{var t=r.queue.shift(),u=this.$SphericalMediaCanvasPool1.get(t);if(!u)throw new Error('Canvas pool could not find the item',t);s=u.canvas;u.beforeCanvasLost();this.$SphericalMediaCanvasPool1['delete'](t);s.className=o.className;s.height=o.height;s.width=o.width;s.tabIndex=o.tabIndex;s.setAttribute('data-id',o['data-id']);}if(!s)throw new Error('Failed to get a canvas.');r.queue.push(p);this.$SphericalMediaCanvasPool2.set(n,r);this.$SphericalMediaCanvasPool1.set(p,{canvas:s,beforeCanvasLost:m.beforeCanvasLost});return s;};f.exports=new k();}),null);
__d('getErrorNameFromWebGLErrorCode',[],(function a(b,c,d,e,f,g){var h={'0':'NO_ERROR','1280':'INVALID_ENUM','1281':'INVALID_VALUE','1282':'INVALID_OPERATION','1285':'OUT_OF_MEMORY','1286':'INVALID_FRAMEBUFFER_OPERATION','37442':'CONTEXT_LOST_WEBGL'};function i(j){if(!(j in h))return 'UNKNOWN_ERROR';return h[j];}f.exports=i;}),null);
__d("gl-matrix-common",[],(function a(b,c,d,e,f,g){var h={};h.EPSILON=1e-06;h.ARRAY_TYPE=(typeof Float32Array!=='undefined')?Float32Array:Array;h.RANDOM=Math.random;h.ENABLE_SIMD=false;h.SIMD_AVAILABLE=(h.ARRAY_TYPE===this.Float32Array)&&('SIMD' in this);h.USE_SIMD=h.ENABLE_SIMD&&h.SIMD_AVAILABLE;h.setMatrixArrayType=function(j){h.ARRAY_TYPE=j;};var i=Math.PI/180;h.toRadian=function(j){return j*i;};h.equals=function(j,k){return Math.abs(j-k)<=h.EPSILON*Math.max(1,Math.abs(j),Math.abs(k));};f.exports=h;}),null);
__d("gl-matrix-mat4",["gl-matrix-common"],(function a(b,c,d,e,f,g){var h=c("gl-matrix-common"),i={scalar:{},SIMD:{}};i.create=function(){var j=new h.ARRAY_TYPE(16);j[0]=1;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=1;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=1;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j;};i.clone=function(j){var k=new h.ARRAY_TYPE(16);k[0]=j[0];k[1]=j[1];k[2]=j[2];k[3]=j[3];k[4]=j[4];k[5]=j[5];k[6]=j[6];k[7]=j[7];k[8]=j[8];k[9]=j[9];k[10]=j[10];k[11]=j[11];k[12]=j[12];k[13]=j[13];k[14]=j[14];k[15]=j[15];return k;};i.copy=function(j,k){j[0]=k[0];j[1]=k[1];j[2]=k[2];j[3]=k[3];j[4]=k[4];j[5]=k[5];j[6]=k[6];j[7]=k[7];j[8]=k[8];j[9]=k[9];j[10]=k[10];j[11]=k[11];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15];return j;};i.fromValues=function(j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=new h.ARRAY_TYPE(16);z[0]=j;z[1]=k;z[2]=l;z[3]=m;z[4]=n;z[5]=o;z[6]=p;z[7]=q;z[8]=r;z[9]=s;z[10]=t;z[11]=u;z[12]=v;z[13]=w;z[14]=x;z[15]=y;return z;};i.set=function(j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){j[0]=k;j[1]=l;j[2]=m;j[3]=n;j[4]=o;j[5]=p;j[6]=q;j[7]=r;j[8]=s;j[9]=t;j[10]=u;j[11]=v;j[12]=w;j[13]=x;j[14]=y;j[15]=z;return j;};i.identity=function(j){j[0]=1;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=1;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=1;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j;};i.scalar.transpose=function(j,k){if(j===k){var l=k[1],m=k[2],n=k[3],o=k[6],p=k[7],q=k[11];j[1]=k[4];j[2]=k[8];j[3]=k[12];j[4]=l;j[6]=k[9];j[7]=k[13];j[8]=m;j[9]=o;j[11]=k[14];j[12]=n;j[13]=p;j[14]=q;}else{j[0]=k[0];j[1]=k[4];j[2]=k[8];j[3]=k[12];j[4]=k[1];j[5]=k[5];j[6]=k[9];j[7]=k[13];j[8]=k[2];j[9]=k[6];j[10]=k[10];j[11]=k[14];j[12]=k[3];j[13]=k[7];j[14]=k[11];j[15]=k[15];}return j;};i.SIMD.transpose=function(j,k){var l,m,n,o,p,q,r,s,t,u;l=SIMD.Float32x4.load(k,0);m=SIMD.Float32x4.load(k,4);n=SIMD.Float32x4.load(k,8);o=SIMD.Float32x4.load(k,12);p=SIMD.Float32x4.shuffle(l,m,0,1,4,5);q=SIMD.Float32x4.shuffle(n,o,0,1,4,5);r=SIMD.Float32x4.shuffle(p,q,0,2,4,6);s=SIMD.Float32x4.shuffle(p,q,1,3,5,7);SIMD.Float32x4.store(j,0,r);SIMD.Float32x4.store(j,4,s);p=SIMD.Float32x4.shuffle(l,m,2,3,6,7);q=SIMD.Float32x4.shuffle(n,o,2,3,6,7);t=SIMD.Float32x4.shuffle(p,q,0,2,4,6);u=SIMD.Float32x4.shuffle(p,q,1,3,5,7);SIMD.Float32x4.store(j,8,t);SIMD.Float32x4.store(j,12,u);return j;};i.transpose=h.USE_SIMD?i.SIMD.transpose:i.scalar.transpose;i.scalar.invert=function(j,k){var l=k[0],m=k[1],n=k[2],o=k[3],p=k[4],q=k[5],r=k[6],s=k[7],t=k[8],u=k[9],v=k[10],w=k[11],x=k[12],y=k[13],z=k[14],aa=k[15],ba=l*q-m*p,ca=l*r-n*p,da=l*s-o*p,ea=m*r-n*q,fa=m*s-o*q,ga=n*s-o*r,ha=t*y-u*x,ia=t*z-v*x,ja=t*aa-w*x,ka=u*z-v*y,la=u*aa-w*y,ma=v*aa-w*z,na=ba*ma-ca*la+da*ka+ea*ja-fa*ia+ga*ha;if(!na)return null;na=1/na;j[0]=(q*ma-r*la+s*ka)*na;j[1]=(n*la-m*ma-o*ka)*na;j[2]=(y*ga-z*fa+aa*ea)*na;j[3]=(v*fa-u*ga-w*ea)*na;j[4]=(r*ja-p*ma-s*ia)*na;j[5]=(l*ma-n*ja+o*ia)*na;j[6]=(z*da-x*ga-aa*ca)*na;j[7]=(t*ga-v*da+w*ca)*na;j[8]=(p*la-q*ja+s*ha)*na;j[9]=(m*ja-l*la-o*ha)*na;j[10]=(x*fa-y*da+aa*ba)*na;j[11]=(u*da-t*fa-w*ba)*na;j[12]=(q*ia-p*ka-r*ha)*na;j[13]=(l*ka-m*ia+n*ha)*na;j[14]=(y*ca-x*ea-z*ba)*na;j[15]=(t*ea-u*ca+v*ba)*na;return j;};i.SIMD.invert=function(j,k){var l,m,n,o,p,q,r,s,t,u,v=SIMD.Float32x4.load(k,0),w=SIMD.Float32x4.load(k,4),x=SIMD.Float32x4.load(k,8),y=SIMD.Float32x4.load(k,12);p=SIMD.Float32x4.shuffle(v,w,0,1,4,5);m=SIMD.Float32x4.shuffle(x,y,0,1,4,5);l=SIMD.Float32x4.shuffle(p,m,0,2,4,6);m=SIMD.Float32x4.shuffle(m,p,1,3,5,7);p=SIMD.Float32x4.shuffle(v,w,2,3,6,7);o=SIMD.Float32x4.shuffle(x,y,2,3,6,7);n=SIMD.Float32x4.shuffle(p,o,0,2,4,6);o=SIMD.Float32x4.shuffle(o,p,1,3,5,7);p=SIMD.Float32x4.mul(n,o);p=SIMD.Float32x4.swizzle(p,1,0,3,2);q=SIMD.Float32x4.mul(m,p);r=SIMD.Float32x4.mul(l,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(m,p),q);r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,p),r);r=SIMD.Float32x4.swizzle(r,2,3,0,1);p=SIMD.Float32x4.mul(m,n);p=SIMD.Float32x4.swizzle(p,1,0,3,2);q=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,p),q);t=SIMD.Float32x4.mul(l,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(o,p));t=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,p),t);t=SIMD.Float32x4.swizzle(t,2,3,0,1);p=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,2,3,0,1),o);p=SIMD.Float32x4.swizzle(p,1,0,3,2);n=SIMD.Float32x4.swizzle(n,2,3,0,1);q=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,p),q);s=SIMD.Float32x4.mul(l,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(n,p));s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,p),s);s=SIMD.Float32x4.swizzle(s,2,3,0,1);p=SIMD.Float32x4.mul(l,m);p=SIMD.Float32x4.swizzle(p,1,0,3,2);s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,p),s);t=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,p),t);p=SIMD.Float32x4.swizzle(p,2,3,0,1);s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,p),s);t=SIMD.Float32x4.sub(t,SIMD.Float32x4.mul(n,p));p=SIMD.Float32x4.mul(l,o);p=SIMD.Float32x4.swizzle(p,1,0,3,2);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(n,p));s=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,p),s);p=SIMD.Float32x4.swizzle(p,2,3,0,1);r=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,p),r);s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(m,p));p=SIMD.Float32x4.mul(l,n);p=SIMD.Float32x4.swizzle(p,1,0,3,2);r=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,p),r);t=SIMD.Float32x4.sub(t,SIMD.Float32x4.mul(m,p));p=SIMD.Float32x4.swizzle(p,2,3,0,1);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(o,p));t=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,p),t);u=SIMD.Float32x4.mul(l,q);u=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(u,2,3,0,1),u);u=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(u,1,0,3,2),u);p=SIMD.Float32x4.reciprocalApproximation(u);u=SIMD.Float32x4.sub(SIMD.Float32x4.add(p,p),SIMD.Float32x4.mul(u,SIMD.Float32x4.mul(p,p)));u=SIMD.Float32x4.swizzle(u,0,0,0,0);if(!u)return null;SIMD.Float32x4.store(j,0,SIMD.Float32x4.mul(u,q));SIMD.Float32x4.store(j,4,SIMD.Float32x4.mul(u,r));SIMD.Float32x4.store(j,8,SIMD.Float32x4.mul(u,s));SIMD.Float32x4.store(j,12,SIMD.Float32x4.mul(u,t));return j;};i.invert=h.USE_SIMD?i.SIMD.invert:i.scalar.invert;i.scalar.adjoint=function(j,k){var l=k[0],m=k[1],n=k[2],o=k[3],p=k[4],q=k[5],r=k[6],s=k[7],t=k[8],u=k[9],v=k[10],w=k[11],x=k[12],y=k[13],z=k[14],aa=k[15];j[0]=(q*(v*aa-w*z)-u*(r*aa-s*z)+y*(r*w-s*v));j[1]=-(m*(v*aa-w*z)-u*(n*aa-o*z)+y*(n*w-o*v));j[2]=(m*(r*aa-s*z)-q*(n*aa-o*z)+y*(n*s-o*r));j[3]=-(m*(r*w-s*v)-q*(n*w-o*v)+u*(n*s-o*r));j[4]=-(p*(v*aa-w*z)-t*(r*aa-s*z)+x*(r*w-s*v));j[5]=(l*(v*aa-w*z)-t*(n*aa-o*z)+x*(n*w-o*v));j[6]=-(l*(r*aa-s*z)-p*(n*aa-o*z)+x*(n*s-o*r));j[7]=(l*(r*w-s*v)-p*(n*w-o*v)+t*(n*s-o*r));j[8]=(p*(u*aa-w*y)-t*(q*aa-s*y)+x*(q*w-s*u));j[9]=-(l*(u*aa-w*y)-t*(m*aa-o*y)+x*(m*w-o*u));j[10]=(l*(q*aa-s*y)-p*(m*aa-o*y)+x*(m*s-o*q));j[11]=-(l*(q*w-s*u)-p*(m*w-o*u)+t*(m*s-o*q));j[12]=-(p*(u*z-v*y)-t*(q*z-r*y)+x*(q*v-r*u));j[13]=(l*(u*z-v*y)-t*(m*z-n*y)+x*(m*v-n*u));j[14]=-(l*(q*z-r*y)-p*(m*z-n*y)+x*(m*r-n*q));j[15]=(l*(q*v-r*u)-p*(m*v-n*u)+t*(m*r-n*q));return j;};i.SIMD.adjoint=function(j,k){var l,m,n,o,p,q,r,s,t,u,v,w,x;l=SIMD.Float32x4.load(k,0);m=SIMD.Float32x4.load(k,4);n=SIMD.Float32x4.load(k,8);o=SIMD.Float32x4.load(k,12);t=SIMD.Float32x4.shuffle(l,m,0,1,4,5);q=SIMD.Float32x4.shuffle(n,o,0,1,4,5);p=SIMD.Float32x4.shuffle(t,q,0,2,4,6);q=SIMD.Float32x4.shuffle(q,t,1,3,5,7);t=SIMD.Float32x4.shuffle(l,m,2,3,6,7);s=SIMD.Float32x4.shuffle(n,o,2,3,6,7);r=SIMD.Float32x4.shuffle(t,s,0,2,4,6);s=SIMD.Float32x4.shuffle(s,t,1,3,5,7);t=SIMD.Float32x4.mul(r,s);t=SIMD.Float32x4.swizzle(t,1,0,3,2);u=SIMD.Float32x4.mul(q,t);v=SIMD.Float32x4.mul(p,t);t=SIMD.Float32x4.swizzle(t,2,3,0,1);u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(q,t),u);v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,t),v);v=SIMD.Float32x4.swizzle(v,2,3,0,1);t=SIMD.Float32x4.mul(q,r);t=SIMD.Float32x4.swizzle(t,1,0,3,2);u=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,t),u);x=SIMD.Float32x4.mul(p,t);t=SIMD.Float32x4.swizzle(t,2,3,0,1);u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(s,t));x=SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,t),x);x=SIMD.Float32x4.swizzle(x,2,3,0,1);t=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(q,2,3,0,1),s);t=SIMD.Float32x4.swizzle(t,1,0,3,2);r=SIMD.Float32x4.swizzle(r,2,3,0,1);u=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,t),u);w=SIMD.Float32x4.mul(p,t);t=SIMD.Float32x4.swizzle(t,2,3,0,1);u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(r,t));w=SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,t),w);w=SIMD.Float32x4.swizzle(w,2,3,0,1);t=SIMD.Float32x4.mul(p,q);t=SIMD.Float32x4.swizzle(t,1,0,3,2);w=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,t),w);x=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,t),x);t=SIMD.Float32x4.swizzle(t,2,3,0,1);w=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,t),w);x=SIMD.Float32x4.sub(x,SIMD.Float32x4.mul(r,t));t=SIMD.Float32x4.mul(p,s);t=SIMD.Float32x4.swizzle(t,1,0,3,2);v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(r,t));w=SIMD.Float32x4.add(SIMD.Float32x4.mul(q,t),w);t=SIMD.Float32x4.swizzle(t,2,3,0,1);v=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,t),v);w=SIMD.Float32x4.sub(w,SIMD.Float32x4.mul(q,t));t=SIMD.Float32x4.mul(p,r);t=SIMD.Float32x4.swizzle(t,1,0,3,2);v=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,t),v);x=SIMD.Float32x4.sub(x,SIMD.Float32x4.mul(q,t));t=SIMD.Float32x4.swizzle(t,2,3,0,1);v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(s,t));x=SIMD.Float32x4.add(SIMD.Float32x4.mul(q,t),x);SIMD.Float32x4.store(j,0,u);SIMD.Float32x4.store(j,4,v);SIMD.Float32x4.store(j,8,w);SIMD.Float32x4.store(j,12,x);return j;};i.adjoint=h.USE_SIMD?i.SIMD.adjoint:i.scalar.adjoint;i.determinant=function(j){var k=j[0],l=j[1],m=j[2],n=j[3],o=j[4],p=j[5],q=j[6],r=j[7],s=j[8],t=j[9],u=j[10],v=j[11],w=j[12],x=j[13],y=j[14],z=j[15],aa=k*p-l*o,ba=k*q-m*o,ca=k*r-n*o,da=l*q-m*p,ea=l*r-n*p,fa=m*r-n*q,ga=s*x-t*w,ha=s*y-u*w,ia=s*z-v*w,ja=t*y-u*x,ka=t*z-v*x,la=u*z-v*y;return aa*la-ba*ka+ca*ja+da*ia-ea*ha+fa*ga;};i.SIMD.multiply=function(j,k,l){var m=SIMD.Float32x4.load(k,0),n=SIMD.Float32x4.load(k,4),o=SIMD.Float32x4.load(k,8),p=SIMD.Float32x4.load(k,12),q=SIMD.Float32x4.load(l,0),r=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(q,0,0,0,0),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(q,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(q,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(q,3,3,3,3),p))));SIMD.Float32x4.store(j,0,r);var s=SIMD.Float32x4.load(l,4),t=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),p))));SIMD.Float32x4.store(j,4,t);var u=SIMD.Float32x4.load(l,8),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),p))));SIMD.Float32x4.store(j,8,v);var w=SIMD.Float32x4.load(l,12),x=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(w,0,0,0,0),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(w,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(w,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(w,3,3,3,3),p))));SIMD.Float32x4.store(j,12,x);return j;};i.scalar.multiply=function(j,k,l){var m=k[0],n=k[1],o=k[2],p=k[3],q=k[4],r=k[5],s=k[6],t=k[7],u=k[8],v=k[9],w=k[10],x=k[11],y=k[12],z=k[13],aa=k[14],ba=k[15],ca=l[0],da=l[1],ea=l[2],fa=l[3];j[0]=ca*m+da*q+ea*u+fa*y;j[1]=ca*n+da*r+ea*v+fa*z;j[2]=ca*o+da*s+ea*w+fa*aa;j[3]=ca*p+da*t+ea*x+fa*ba;ca=l[4];da=l[5];ea=l[6];fa=l[7];j[4]=ca*m+da*q+ea*u+fa*y;j[5]=ca*n+da*r+ea*v+fa*z;j[6]=ca*o+da*s+ea*w+fa*aa;j[7]=ca*p+da*t+ea*x+fa*ba;ca=l[8];da=l[9];ea=l[10];fa=l[11];j[8]=ca*m+da*q+ea*u+fa*y;j[9]=ca*n+da*r+ea*v+fa*z;j[10]=ca*o+da*s+ea*w+fa*aa;j[11]=ca*p+da*t+ea*x+fa*ba;ca=l[12];da=l[13];ea=l[14];fa=l[15];j[12]=ca*m+da*q+ea*u+fa*y;j[13]=ca*n+da*r+ea*v+fa*z;j[14]=ca*o+da*s+ea*w+fa*aa;j[15]=ca*p+da*t+ea*x+fa*ba;return j;};i.multiply=h.USE_SIMD?i.SIMD.multiply:i.scalar.multiply;i.mul=i.multiply;i.scalar.translate=function(j,k,l){var m=l[0],n=l[1],o=l[2],p,q,r,s,t,u,v,w,x,y,z,aa;if(k===j){j[12]=k[0]*m+k[4]*n+k[8]*o+k[12];j[13]=k[1]*m+k[5]*n+k[9]*o+k[13];j[14]=k[2]*m+k[6]*n+k[10]*o+k[14];j[15]=k[3]*m+k[7]*n+k[11]*o+k[15];}else{p=k[0];q=k[1];r=k[2];s=k[3];t=k[4];u=k[5];v=k[6];w=k[7];x=k[8];y=k[9];z=k[10];aa=k[11];j[0]=p;j[1]=q;j[2]=r;j[3]=s;j[4]=t;j[5]=u;j[6]=v;j[7]=w;j[8]=x;j[9]=y;j[10]=z;j[11]=aa;j[12]=p*m+t*n+x*o+k[12];j[13]=q*m+u*n+y*o+k[13];j[14]=r*m+v*n+z*o+k[14];j[15]=s*m+w*n+aa*o+k[15];}return j;};i.SIMD.translate=function(j,k,l){var m=SIMD.Float32x4.load(k,0),n=SIMD.Float32x4.load(k,4),o=SIMD.Float32x4.load(k,8),p=SIMD.Float32x4.load(k,12),q=SIMD.Float32x4(l[0],l[1],l[2],0);if(k!==j){j[0]=k[0];j[1]=k[1];j[2]=k[2];j[3]=k[3];j[4]=k[4];j[5]=k[5];j[6]=k[6];j[7]=k[7];j[8]=k[8];j[9]=k[9];j[10]=k[10];j[11]=k[11];}m=SIMD.Float32x4.mul(m,SIMD.Float32x4.swizzle(q,0,0,0,0));n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(q,1,1,1,1));o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(q,2,2,2,2));var r=SIMD.Float32x4.add(m,SIMD.Float32x4.add(n,SIMD.Float32x4.add(o,p)));SIMD.Float32x4.store(j,12,r);return j;};i.translate=h.USE_SIMD?i.SIMD.translate:i.scalar.translate;i.scalar.scale=function(j,k,l){var m=l[0],n=l[1],o=l[2];j[0]=k[0]*m;j[1]=k[1]*m;j[2]=k[2]*m;j[3]=k[3]*m;j[4]=k[4]*n;j[5]=k[5]*n;j[6]=k[6]*n;j[7]=k[7]*n;j[8]=k[8]*o;j[9]=k[9]*o;j[10]=k[10]*o;j[11]=k[11]*o;j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15];return j;};i.SIMD.scale=function(j,k,l){var m,n,o,p=SIMD.Float32x4(l[0],l[1],l[2],0);m=SIMD.Float32x4.load(k,0);SIMD.Float32x4.store(j,0,SIMD.Float32x4.mul(m,SIMD.Float32x4.swizzle(p,0,0,0,0)));n=SIMD.Float32x4.load(k,4);SIMD.Float32x4.store(j,4,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(p,1,1,1,1)));o=SIMD.Float32x4.load(k,8);SIMD.Float32x4.store(j,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(p,2,2,2,2)));j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15];return j;};i.scale=h.USE_SIMD?i.SIMD.scale:i.scalar.scale;i.rotate=function(j,k,l,m){var n=m[0],o=m[1],p=m[2],q=Math.sqrt(n*n+o*o+p*p),r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa;if(Math.abs(q)<h.EPSILON)return null;q=1/q;n*=q;o*=q;p*=q;r=Math.sin(l);s=Math.cos(l);t=1-s;u=k[0];v=k[1];w=k[2];x=k[3];y=k[4];z=k[5];aa=k[6];ba=k[7];ca=k[8];da=k[9];ea=k[10];fa=k[11];ga=n*n*t+s;ha=o*n*t+p*r;ia=p*n*t-o*r;ja=n*o*t-p*r;ka=o*o*t+s;la=p*o*t+n*r;ma=n*p*t+o*r;na=o*p*t-n*r;oa=p*p*t+s;j[0]=u*ga+y*ha+ca*ia;j[1]=v*ga+z*ha+da*ia;j[2]=w*ga+aa*ha+ea*ia;j[3]=x*ga+ba*ha+fa*ia;j[4]=u*ja+y*ka+ca*la;j[5]=v*ja+z*ka+da*la;j[6]=w*ja+aa*ka+ea*la;j[7]=x*ja+ba*ka+fa*la;j[8]=u*ma+y*na+ca*oa;j[9]=v*ma+z*na+da*oa;j[10]=w*ma+aa*na+ea*oa;j[11]=x*ma+ba*na+fa*oa;if(k!==j){j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15];}return j;};i.scalar.rotateX=function(j,k,l){var m=Math.sin(l),n=Math.cos(l),o=k[4],p=k[5],q=k[6],r=k[7],s=k[8],t=k[9],u=k[10],v=k[11];if(k!==j){j[0]=k[0];j[1]=k[1];j[2]=k[2];j[3]=k[3];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15];}j[4]=o*n+s*m;j[5]=p*n+t*m;j[6]=q*n+u*m;j[7]=r*n+v*m;j[8]=s*n-o*m;j[9]=t*n-p*m;j[10]=u*n-q*m;j[11]=v*n-r*m;return j;};i.SIMD.rotateX=function(j,k,l){var m=SIMD.Float32x4.splat(Math.sin(l)),n=SIMD.Float32x4.splat(Math.cos(l));if(k!==j){j[0]=k[0];j[1]=k[1];j[2]=k[2];j[3]=k[3];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15];}var o=SIMD.Float32x4.load(k,4),p=SIMD.Float32x4.load(k,8);SIMD.Float32x4.store(j,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(p,m)));SIMD.Float32x4.store(j,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,n),SIMD.Float32x4.mul(o,m)));return j;};i.rotateX=h.USE_SIMD?i.SIMD.rotateX:i.scalar.rotateX;i.scalar.rotateY=function(j,k,l){var m=Math.sin(l),n=Math.cos(l),o=k[0],p=k[1],q=k[2],r=k[3],s=k[8],t=k[9],u=k[10],v=k[11];if(k!==j){j[4]=k[4];j[5]=k[5];j[6]=k[6];j[7]=k[7];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15];}j[0]=o*n-s*m;j[1]=p*n-t*m;j[2]=q*n-u*m;j[3]=r*n-v*m;j[8]=o*m+s*n;j[9]=p*m+t*n;j[10]=q*m+u*n;j[11]=r*m+v*n;return j;};i.SIMD.rotateY=function(j,k,l){var m=SIMD.Float32x4.splat(Math.sin(l)),n=SIMD.Float32x4.splat(Math.cos(l));if(k!==j){j[4]=k[4];j[5]=k[5];j[6]=k[6];j[7]=k[7];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15];}var o=SIMD.Float32x4.load(k,0),p=SIMD.Float32x4.load(k,8);SIMD.Float32x4.store(j,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(p,m)));SIMD.Float32x4.store(j,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,m),SIMD.Float32x4.mul(p,n)));return j;};i.rotateY=h.USE_SIMD?i.SIMD.rotateY:i.scalar.rotateY;i.scalar.rotateZ=function(j,k,l){var m=Math.sin(l),n=Math.cos(l),o=k[0],p=k[1],q=k[2],r=k[3],s=k[4],t=k[5],u=k[6],v=k[7];if(k!==j){j[8]=k[8];j[9]=k[9];j[10]=k[10];j[11]=k[11];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15];}j[0]=o*n+s*m;j[1]=p*n+t*m;j[2]=q*n+u*m;j[3]=r*n+v*m;j[4]=s*n-o*m;j[5]=t*n-p*m;j[6]=u*n-q*m;j[7]=v*n-r*m;return j;};i.SIMD.rotateZ=function(j,k,l){var m=SIMD.Float32x4.splat(Math.sin(l)),n=SIMD.Float32x4.splat(Math.cos(l));if(k!==j){j[8]=k[8];j[9]=k[9];j[10]=k[10];j[11]=k[11];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15];}var o=SIMD.Float32x4.load(k,0),p=SIMD.Float32x4.load(k,4);SIMD.Float32x4.store(j,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(p,m)));SIMD.Float32x4.store(j,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,n),SIMD.Float32x4.mul(o,m)));return j;};i.rotateZ=h.USE_SIMD?i.SIMD.rotateZ:i.scalar.rotateZ;i.fromTranslation=function(j,k){j[0]=1;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=1;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=1;j[11]=0;j[12]=k[0];j[13]=k[1];j[14]=k[2];j[15]=1;return j;};i.fromScaling=function(j,k){j[0]=k[0];j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=k[1];j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=k[2];j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j;};i.fromRotation=function(j,k,l){var m=l[0],n=l[1],o=l[2],p=Math.sqrt(m*m+n*n+o*o),q,r,s;if(Math.abs(p)<h.EPSILON)return null;p=1/p;m*=p;n*=p;o*=p;q=Math.sin(k);r=Math.cos(k);s=1-r;j[0]=m*m*s+r;j[1]=n*m*s+o*q;j[2]=o*m*s-n*q;j[3]=0;j[4]=m*n*s-o*q;j[5]=n*n*s+r;j[6]=o*n*s+m*q;j[7]=0;j[8]=m*o*s+n*q;j[9]=n*o*s-m*q;j[10]=o*o*s+r;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j;};i.fromXRotation=function(j,k){var l=Math.sin(k),m=Math.cos(k);j[0]=1;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=m;j[6]=l;j[7]=0;j[8]=0;j[9]=-l;j[10]=m;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j;};i.fromYRotation=function(j,k){var l=Math.sin(k),m=Math.cos(k);j[0]=m;j[1]=0;j[2]=-l;j[3]=0;j[4]=0;j[5]=1;j[6]=0;j[7]=0;j[8]=l;j[9]=0;j[10]=m;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j;};i.fromZRotation=function(j,k){var l=Math.sin(k),m=Math.cos(k);j[0]=m;j[1]=l;j[2]=0;j[3]=0;j[4]=-l;j[5]=m;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=1;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j;};i.fromRotationTranslation=function(j,k,l){var m=k[0],n=k[1],o=k[2],p=k[3],q=m+m,r=n+n,s=o+o,t=m*q,u=m*r,v=m*s,w=n*r,x=n*s,y=o*s,z=p*q,aa=p*r,ba=p*s;j[0]=1-(w+y);j[1]=u+ba;j[2]=v-aa;j[3]=0;j[4]=u-ba;j[5]=1-(t+y);j[6]=x+z;j[7]=0;j[8]=v+aa;j[9]=x-z;j[10]=1-(t+w);j[11]=0;j[12]=l[0];j[13]=l[1];j[14]=l[2];j[15]=1;return j;};i.getTranslation=function(j,k){j[0]=k[12];j[1]=k[13];j[2]=k[14];return j;};i.getRotation=function(j,k){var l=k[0]+k[5]+k[10],m=0;if(l>0){m=Math.sqrt(l+1)*2;j[3]=.25*m;j[0]=(k[6]-k[9])/m;j[1]=(k[8]-k[2])/m;j[2]=(k[1]-k[4])/m;}else if((k[0]>k[5])&(k[0]>k[10])){m=Math.sqrt(1+k[0]-k[5]-k[10])*2;j[3]=(k[6]-k[9])/m;j[0]=.25*m;j[1]=(k[1]+k[4])/m;j[2]=(k[8]+k[2])/m;}else if(k[5]>k[10]){m=Math.sqrt(1+k[5]-k[0]-k[10])*2;j[3]=(k[8]-k[2])/m;j[0]=(k[1]+k[4])/m;j[1]=.25*m;j[2]=(k[6]+k[9])/m;}else{m=Math.sqrt(1+k[10]-k[0]-k[5])*2;j[3]=(k[1]-k[4])/m;j[0]=(k[8]+k[2])/m;j[1]=(k[6]+k[9])/m;j[2]=.25*m;}return j;};i.fromRotationTranslationScale=function(j,k,l,m){var n=k[0],o=k[1],p=k[2],q=k[3],r=n+n,s=o+o,t=p+p,u=n*r,v=n*s,w=n*t,x=o*s,y=o*t,z=p*t,aa=q*r,ba=q*s,ca=q*t,da=m[0],ea=m[1],fa=m[2];j[0]=(1-(x+z))*da;j[1]=(v+ca)*da;j[2]=(w-ba)*da;j[3]=0;j[4]=(v-ca)*ea;j[5]=(1-(u+z))*ea;j[6]=(y+aa)*ea;j[7]=0;j[8]=(w+ba)*fa;j[9]=(y-aa)*fa;j[10]=(1-(u+x))*fa;j[11]=0;j[12]=l[0];j[13]=l[1];j[14]=l[2];j[15]=1;return j;};i.fromRotationTranslationScaleOrigin=function(j,k,l,m,n){var o=k[0],p=k[1],q=k[2],r=k[3],s=o+o,t=p+p,u=q+q,v=o*s,w=o*t,x=o*u,y=p*t,z=p*u,aa=q*u,ba=r*s,ca=r*t,da=r*u,ea=m[0],fa=m[1],ga=m[2],ha=n[0],ia=n[1],ja=n[2];j[0]=(1-(y+aa))*ea;j[1]=(w+da)*ea;j[2]=(x-ca)*ea;j[3]=0;j[4]=(w-da)*fa;j[5]=(1-(v+aa))*fa;j[6]=(z+ba)*fa;j[7]=0;j[8]=(x+ca)*ga;j[9]=(z-ba)*ga;j[10]=(1-(v+y))*ga;j[11]=0;j[12]=l[0]+ha-(j[0]*ha+j[4]*ia+j[8]*ja);j[13]=l[1]+ia-(j[1]*ha+j[5]*ia+j[9]*ja);j[14]=l[2]+ja-(j[2]*ha+j[6]*ia+j[10]*ja);j[15]=1;return j;};i.fromQuat=function(j,k){var l=k[0],m=k[1],n=k[2],o=k[3],p=l+l,q=m+m,r=n+n,s=l*p,t=m*p,u=m*q,v=n*p,w=n*q,x=n*r,y=o*p,z=o*q,aa=o*r;j[0]=1-u-x;j[1]=t+aa;j[2]=v-z;j[3]=0;j[4]=t-aa;j[5]=1-s-x;j[6]=w+y;j[7]=0;j[8]=v+z;j[9]=w-y;j[10]=1-s-u;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j;};i.frustum=function(j,k,l,m,n,o,p){var q=1/(l-k),r=1/(n-m),s=1/(o-p);j[0]=(o*2)*q;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=(o*2)*r;j[6]=0;j[7]=0;j[8]=(l+k)*q;j[9]=(n+m)*r;j[10]=(p+o)*s;j[11]=-1;j[12]=0;j[13]=0;j[14]=(p*o*2)*s;j[15]=0;return j;};i.perspective=function(j,k,l,m,n){var o=1/Math.tan(k/2),p=1/(m-n);j[0]=o/l;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=o;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=(n+m)*p;j[11]=-1;j[12]=0;j[13]=0;j[14]=(2*n*m)*p;j[15]=0;return j;};i.perspectiveFromFieldOfView=function(j,k,l,m){var n=Math.tan(k.upDegrees*Math.PI/180),o=Math.tan(k.downDegrees*Math.PI/180),p=Math.tan(k.leftDegrees*Math.PI/180),q=Math.tan(k.rightDegrees*Math.PI/180),r=2/(p+q),s=2/(n+o);j[0]=r;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=s;j[6]=0;j[7]=0;j[8]=-((p-q)*r*.5);j[9]=((n-o)*s*.5);j[10]=m/(l-m);j[11]=-1;j[12]=0;j[13]=0;j[14]=(m*l)/(l-m);j[15]=0;return j;};i.ortho=function(j,k,l,m,n,o,p){var q=1/(k-l),r=1/(m-n),s=1/(o-p);j[0]=-2*q;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=-2*r;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=2*s;j[11]=0;j[12]=(k+l)*q;j[13]=(n+m)*r;j[14]=(p+o)*s;j[15]=1;return j;};i.lookAt=function(j,k,l,m){var n,o,p,q,r,s,t,u,v,w,x=k[0],y=k[1],z=k[2],aa=m[0],ba=m[1],ca=m[2],da=l[0],ea=l[1],fa=l[2];if(Math.abs(x-da)<h.EPSILON&&Math.abs(y-ea)<h.EPSILON&&Math.abs(z-fa)<h.EPSILON)return i.identity(j);t=x-da;u=y-ea;v=z-fa;w=1/Math.sqrt(t*t+u*u+v*v);t*=w;u*=w;v*=w;n=ba*v-ca*u;o=ca*t-aa*v;p=aa*u-ba*t;w=Math.sqrt(n*n+o*o+p*p);if(!w){n=0;o=0;p=0;}else{w=1/w;n*=w;o*=w;p*=w;}q=u*p-v*o;r=v*n-t*p;s=t*o-u*n;w=Math.sqrt(q*q+r*r+s*s);if(!w){q=0;r=0;s=0;}else{w=1/w;q*=w;r*=w;s*=w;}j[0]=n;j[1]=q;j[2]=t;j[3]=0;j[4]=o;j[5]=r;j[6]=u;j[7]=0;j[8]=p;j[9]=s;j[10]=v;j[11]=0;j[12]=-(n*x+o*y+p*z);j[13]=-(q*x+r*y+s*z);j[14]=-(t*x+u*y+v*z);j[15]=1;return j;};i.str=function(j){return 'mat4('+j[0]+', '+j[1]+', '+j[2]+', '+j[3]+', '+j[4]+', '+j[5]+', '+j[6]+', '+j[7]+', '+j[8]+', '+j[9]+', '+j[10]+', '+j[11]+', '+j[12]+', '+j[13]+', '+j[14]+', '+j[15]+')';};i.frob=function(j){return (Math.sqrt(Math.pow(j[0],2)+Math.pow(j[1],2)+Math.pow(j[2],2)+Math.pow(j[3],2)+Math.pow(j[4],2)+Math.pow(j[5],2)+Math.pow(j[6],2)+Math.pow(j[7],2)+Math.pow(j[8],2)+Math.pow(j[9],2)+Math.pow(j[10],2)+Math.pow(j[11],2)+Math.pow(j[12],2)+Math.pow(j[13],2)+Math.pow(j[14],2)+Math.pow(j[15],2)));};i.add=function(j,k,l){j[0]=k[0]+l[0];j[1]=k[1]+l[1];j[2]=k[2]+l[2];j[3]=k[3]+l[3];j[4]=k[4]+l[4];j[5]=k[5]+l[5];j[6]=k[6]+l[6];j[7]=k[7]+l[7];j[8]=k[8]+l[8];j[9]=k[9]+l[9];j[10]=k[10]+l[10];j[11]=k[11]+l[11];j[12]=k[12]+l[12];j[13]=k[13]+l[13];j[14]=k[14]+l[14];j[15]=k[15]+l[15];return j;};i.subtract=function(j,k,l){j[0]=k[0]-l[0];j[1]=k[1]-l[1];j[2]=k[2]-l[2];j[3]=k[3]-l[3];j[4]=k[4]-l[4];j[5]=k[5]-l[5];j[6]=k[6]-l[6];j[7]=k[7]-l[7];j[8]=k[8]-l[8];j[9]=k[9]-l[9];j[10]=k[10]-l[10];j[11]=k[11]-l[11];j[12]=k[12]-l[12];j[13]=k[13]-l[13];j[14]=k[14]-l[14];j[15]=k[15]-l[15];return j;};i.sub=i.subtract;i.multiplyScalar=function(j,k,l){j[0]=k[0]*l;j[1]=k[1]*l;j[2]=k[2]*l;j[3]=k[3]*l;j[4]=k[4]*l;j[5]=k[5]*l;j[6]=k[6]*l;j[7]=k[7]*l;j[8]=k[8]*l;j[9]=k[9]*l;j[10]=k[10]*l;j[11]=k[11]*l;j[12]=k[12]*l;j[13]=k[13]*l;j[14]=k[14]*l;j[15]=k[15]*l;return j;};i.multiplyScalarAndAdd=function(j,k,l,m){j[0]=k[0]+(l[0]*m);j[1]=k[1]+(l[1]*m);j[2]=k[2]+(l[2]*m);j[3]=k[3]+(l[3]*m);j[4]=k[4]+(l[4]*m);j[5]=k[5]+(l[5]*m);j[6]=k[6]+(l[6]*m);j[7]=k[7]+(l[7]*m);j[8]=k[8]+(l[8]*m);j[9]=k[9]+(l[9]*m);j[10]=k[10]+(l[10]*m);j[11]=k[11]+(l[11]*m);j[12]=k[12]+(l[12]*m);j[13]=k[13]+(l[13]*m);j[14]=k[14]+(l[14]*m);j[15]=k[15]+(l[15]*m);return j;};i.exactEquals=function(j,k){return j[0]===k[0]&&j[1]===k[1]&&j[2]===k[2]&&j[3]===k[3]&&j[4]===k[4]&&j[5]===k[5]&&j[6]===k[6]&&j[7]===k[7]&&j[8]===k[8]&&j[9]===k[9]&&j[10]===k[10]&&j[11]===k[11]&&j[12]===k[12]&&j[13]===k[13]&&j[14]===k[14]&&j[15]===k[15];};i.equals=function(j,k){var l=j[0],m=j[1],n=j[2],o=j[3],p=j[4],q=j[5],r=j[6],s=j[7],t=j[8],u=j[9],v=j[10],w=j[11],x=j[12],y=j[13],z=j[14],aa=j[15],ba=k[0],ca=k[1],da=k[2],ea=k[3],fa=k[4],ga=k[5],ha=k[6],ia=k[7],ja=k[8],ka=k[9],la=k[10],ma=k[11],na=k[12],oa=k[13],pa=k[14],qa=k[15];return (Math.abs(l-ba)<=h.EPSILON*Math.max(1,Math.abs(l),Math.abs(ba))&&Math.abs(m-ca)<=h.EPSILON*Math.max(1,Math.abs(m),Math.abs(ca))&&Math.abs(n-da)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(da))&&Math.abs(o-ea)<=h.EPSILON*Math.max(1,Math.abs(o),Math.abs(ea))&&Math.abs(p-fa)<=h.EPSILON*Math.max(1,Math.abs(p),Math.abs(fa))&&Math.abs(q-ga)<=h.EPSILON*Math.max(1,Math.abs(q),Math.abs(ga))&&Math.abs(r-ha)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(ha))&&Math.abs(s-ia)<=h.EPSILON*Math.max(1,Math.abs(s),Math.abs(ia))&&Math.abs(t-ja)<=h.EPSILON*Math.max(1,Math.abs(t),Math.abs(ja))&&Math.abs(u-ka)<=h.EPSILON*Math.max(1,Math.abs(u),Math.abs(ka))&&Math.abs(v-la)<=h.EPSILON*Math.max(1,Math.abs(v),Math.abs(la))&&Math.abs(w-ma)<=h.EPSILON*Math.max(1,Math.abs(w),Math.abs(ma))&&Math.abs(x-na)<=h.EPSILON*Math.max(1,Math.abs(x),Math.abs(na))&&Math.abs(y-oa)<=h.EPSILON*Math.max(1,Math.abs(y),Math.abs(oa))&&Math.abs(z-pa)<=h.EPSILON*Math.max(1,Math.abs(z),Math.abs(pa))&&Math.abs(aa-qa)<=h.EPSILON*Math.max(1,Math.abs(aa),Math.abs(qa)));};f.exports=i;}),null);
__d("gl-matrix-vec3",["gl-matrix-common"],(function a(b,c,d,e,f,g){var h=c("gl-matrix-common"),i={};i.create=function(){var j=new h.ARRAY_TYPE(3);j[0]=0;j[1]=0;j[2]=0;return j;};i.clone=function(j){var k=new h.ARRAY_TYPE(3);k[0]=j[0];k[1]=j[1];k[2]=j[2];return k;};i.fromValues=function(j,k,l){var m=new h.ARRAY_TYPE(3);m[0]=j;m[1]=k;m[2]=l;return m;};i.copy=function(j,k){j[0]=k[0];j[1]=k[1];j[2]=k[2];return j;};i.set=function(j,k,l,m){j[0]=k;j[1]=l;j[2]=m;return j;};i.add=function(j,k,l){j[0]=k[0]+l[0];j[1]=k[1]+l[1];j[2]=k[2]+l[2];return j;};i.subtract=function(j,k,l){j[0]=k[0]-l[0];j[1]=k[1]-l[1];j[2]=k[2]-l[2];return j;};i.sub=i.subtract;i.multiply=function(j,k,l){j[0]=k[0]*l[0];j[1]=k[1]*l[1];j[2]=k[2]*l[2];return j;};i.mul=i.multiply;i.divide=function(j,k,l){j[0]=k[0]/l[0];j[1]=k[1]/l[1];j[2]=k[2]/l[2];return j;};i.div=i.divide;i.ceil=function(j,k){j[0]=Math.ceil(k[0]);j[1]=Math.ceil(k[1]);j[2]=Math.ceil(k[2]);return j;};i.floor=function(j,k){j[0]=Math.floor(k[0]);j[1]=Math.floor(k[1]);j[2]=Math.floor(k[2]);return j;};i.min=function(j,k,l){j[0]=Math.min(k[0],l[0]);j[1]=Math.min(k[1],l[1]);j[2]=Math.min(k[2],l[2]);return j;};i.max=function(j,k,l){j[0]=Math.max(k[0],l[0]);j[1]=Math.max(k[1],l[1]);j[2]=Math.max(k[2],l[2]);return j;};i.round=function(j,k){j[0]=Math.round(k[0]);j[1]=Math.round(k[1]);j[2]=Math.round(k[2]);return j;};i.scale=function(j,k,l){j[0]=k[0]*l;j[1]=k[1]*l;j[2]=k[2]*l;return j;};i.scaleAndAdd=function(j,k,l,m){j[0]=k[0]+(l[0]*m);j[1]=k[1]+(l[1]*m);j[2]=k[2]+(l[2]*m);return j;};i.distance=function(j,k){var l=k[0]-j[0],m=k[1]-j[1],n=k[2]-j[2];return Math.sqrt(l*l+m*m+n*n);};i.dist=i.distance;i.squaredDistance=function(j,k){var l=k[0]-j[0],m=k[1]-j[1],n=k[2]-j[2];return l*l+m*m+n*n;};i.sqrDist=i.squaredDistance;i.length=function(j){var k=j[0],l=j[1],m=j[2];return Math.sqrt(k*k+l*l+m*m);};i.len=i.length;i.squaredLength=function(j){var k=j[0],l=j[1],m=j[2];return k*k+l*l+m*m;};i.sqrLen=i.squaredLength;i.negate=function(j,k){j[0]=-k[0];j[1]=-k[1];j[2]=-k[2];return j;};i.inverse=function(j,k){j[0]=1/k[0];j[1]=1/k[1];j[2]=1/k[2];return j;};i.normalize=function(j,k){var l=k[0],m=k[1],n=k[2],o=l*l+m*m+n*n;if(o>0){o=1/Math.sqrt(o);j[0]=k[0]*o;j[1]=k[1]*o;j[2]=k[2]*o;}return j;};i.dot=function(j,k){return j[0]*k[0]+j[1]*k[1]+j[2]*k[2];};i.cross=function(j,k,l){var m=k[0],n=k[1],o=k[2],p=l[0],q=l[1],r=l[2];j[0]=n*r-o*q;j[1]=o*p-m*r;j[2]=m*q-n*p;return j;};i.lerp=function(j,k,l,m){var n=k[0],o=k[1],p=k[2];j[0]=n+m*(l[0]-n);j[1]=o+m*(l[1]-o);j[2]=p+m*(l[2]-p);return j;};i.hermite=function(j,k,l,m,n,o){var p=o*o,q=p*(2*o-3)+1,r=p*(o-2)+o,s=p*(o-1),t=p*(3-2*o);j[0]=k[0]*q+l[0]*r+m[0]*s+n[0]*t;j[1]=k[1]*q+l[1]*r+m[1]*s+n[1]*t;j[2]=k[2]*q+l[2]*r+m[2]*s+n[2]*t;return j;};i.bezier=function(j,k,l,m,n,o){var p=1-o,q=p*p,r=o*o,s=q*p,t=3*o*q,u=3*r*p,v=r*o;j[0]=k[0]*s+l[0]*t+m[0]*u+n[0]*v;j[1]=k[1]*s+l[1]*t+m[1]*u+n[1]*v;j[2]=k[2]*s+l[2]*t+m[2]*u+n[2]*v;return j;};i.random=function(j,k){k=k||1;var l=h.RANDOM()*2*Math.PI,m=(h.RANDOM()*2)-1,n=Math.sqrt(1-m*m)*k;j[0]=Math.cos(l)*n;j[1]=Math.sin(l)*n;j[2]=m*k;return j;};i.transformMat4=function(j,k,l){var m=k[0],n=k[1],o=k[2],p=l[3]*m+l[7]*n+l[11]*o+l[15];p=p||1;j[0]=(l[0]*m+l[4]*n+l[8]*o+l[12])/p;j[1]=(l[1]*m+l[5]*n+l[9]*o+l[13])/p;j[2]=(l[2]*m+l[6]*n+l[10]*o+l[14])/p;return j;};i.transformMat3=function(j,k,l){var m=k[0],n=k[1],o=k[2];j[0]=m*l[0]+n*l[3]+o*l[6];j[1]=m*l[1]+n*l[4]+o*l[7];j[2]=m*l[2]+n*l[5]+o*l[8];return j;};i.transformQuat=function(j,k,l){var m=k[0],n=k[1],o=k[2],p=l[0],q=l[1],r=l[2],s=l[3],t=s*m+q*o-r*n,u=s*n+r*m-p*o,v=s*o+p*n-q*m,w=-p*m-q*n-r*o;j[0]=t*s+w*-p+u*-r-v*-q;j[1]=u*s+w*-q+v*-p-t*-r;j[2]=v*s+w*-r+t*-q-u*-p;return j;};i.rotateX=function(j,k,l,m){var n=[],o=[];n[0]=k[0]-l[0];n[1]=k[1]-l[1];n[2]=k[2]-l[2];o[0]=n[0];o[1]=n[1]*Math.cos(m)-n[2]*Math.sin(m);o[2]=n[1]*Math.sin(m)+n[2]*Math.cos(m);j[0]=o[0]+l[0];j[1]=o[1]+l[1];j[2]=o[2]+l[2];return j;};i.rotateY=function(j,k,l,m){var n=[],o=[];n[0]=k[0]-l[0];n[1]=k[1]-l[1];n[2]=k[2]-l[2];o[0]=n[2]*Math.sin(m)+n[0]*Math.cos(m);o[1]=n[1];o[2]=n[2]*Math.cos(m)-n[0]*Math.sin(m);j[0]=o[0]+l[0];j[1]=o[1]+l[1];j[2]=o[2]+l[2];return j;};i.rotateZ=function(j,k,l,m){var n=[],o=[];n[0]=k[0]-l[0];n[1]=k[1]-l[1];n[2]=k[2]-l[2];o[0]=n[0]*Math.cos(m)-n[1]*Math.sin(m);o[1]=n[0]*Math.sin(m)+n[1]*Math.cos(m);o[2]=n[2];j[0]=o[0]+l[0];j[1]=o[1]+l[1];j[2]=o[2]+l[2];return j;};i.forEach=(function(){var j=i.create();return function(k,l,m,n,o,p){var q,r;if(!l)l=3;if(!m)m=0;if(n){r=Math.min((n*l)+m,k.length);}else r=k.length;for(q=m;q<r;q+=l){j[0]=k[q];j[1]=k[q+1];j[2]=k[q+2];o(j,j,p);k[q]=j[0];k[q+1]=j[1];k[q+2]=j[2];}return k;};})();i.angle=function(j,k){var l=i.fromValues(j[0],j[1],j[2]),m=i.fromValues(k[0],k[1],k[2]);i.normalize(l,l);i.normalize(m,m);var n=i.dot(l,m);if(n>1){return 0;}else return Math.acos(n);};i.str=function(j){return 'vec3('+j[0]+', '+j[1]+', '+j[2]+')';};i.exactEquals=function(j,k){return j[0]===k[0]&&j[1]===k[1]&&j[2]===k[2];};i.equals=function(j,k){var l=j[0],m=j[1],n=j[2],o=k[0],p=k[1],q=k[2];return (Math.abs(l-o)<=h.EPSILON*Math.max(1,Math.abs(l),Math.abs(o))&&Math.abs(m-p)<=h.EPSILON*Math.max(1,Math.abs(m),Math.abs(p))&&Math.abs(n-q)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(q)));};f.exports=i;}),null);
__d("GLMatrix",["gl-matrix-common","gl-matrix-mat4","gl-matrix-vec3"],(function a(b,c,d,e,f,g){g.glMatrix=c("gl-matrix-common");g.mat4=c("gl-matrix-mat4");g.vec3=c("gl-matrix-vec3");}),null);